<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

    <title>tweet-split-helper test</title>

    <script src="../../bower_components/webcomponentsjs/webcomponents-lite.js"></script>
    <script src="../../bower_components/web-component-tester/browser.js"></script>

    <link rel="import" href="../../src/lib/tweet-split-helper.html">
  </head>

  <body>

    <test-fixture id="BasicTestFixture">
      <template>
        <tweet-split-helper></tweet-split-helper>
      </template>
    </test-fixture>

    <script>
      suite('TweetSplitHelper', function() {
        suite('splitMessage', function() {
          var element = fixture('BasicTestFixture');

          function verifyResults(parts, message) {
            if (parts.some(function(part) {
                return part.length > 50;
              })) {
              return false;
            }

            var messageFromParts = parts.join('').split(/\d+\/\d+\s/g)
              .map(function(part) {
                return part.trim();
              }).join(' ');
            return messageFromParts.trim() == message.trim();
          }

          /* eslint max-len: ["error", { "ignoreStrings": true }]*/
          var validMessages = [
            'One',
            'This message is very simple, it has 50 characters.',
            'I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself.',
            'I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself.',
            'I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself. I can\'t believe Tweeter now supports chunking my messages, so I don\'t have to do it myself.',
          ];

          var invalidMessages = [
            '',
            'This message is imposible to splitttttttttttttttttttttttttttttttttttttttttttttttttttttttttt.',
            'This is spartarrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrr.',
          ];

          validMessages.map(function(message) {
            test(
              'A valid message with length' + message.length,
              function() {
                var parts = element.splitMessage(message);
                expect(verifyResults(parts, message)).to.be.ok;
              });
          });

          invalidMessages.map(function(message) {
            test(
              'An invalid message with length' + message.length,
              function() {
                expect(element.splitMessage(message)).to.be.null;
              });
          });
        });
      });

    </script>


  </body>

</html>
