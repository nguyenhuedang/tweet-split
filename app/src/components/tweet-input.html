<html><head><link rel="import" href="../../bower_components/polymer/polymer-element.html"><link rel="import" href="../../bower_components/polymer/lib/elements/dom-repeat.html"><link rel="import" href="../../bower_components/iron-autogrow-textarea/iron-autogrow-textarea.html"><link rel="import" href="../../bower_components/polymer/lib/utils/debounce.html"><link rel="import" href="../lib/tweet-split-helper.html"><link rel="import" href="../components/tweet-shared-styles.html"></head><body><dom-module id="tweet-input"><template><custom-style><style is="custom-style" include="tweet-shared-styles"></style></custom-style><style>:host{display:block;background:var(--paper-blue-300);padding-bottom:12px;}#submitButton{margin-left:10px;background:var(--primary-color);border:none;color:white;font-size:14px;padding:10px 30px;border-radius:20px;width:108px;}#submitButton[disabled]{opacity:0.5;}iron-autogrow-textarea{border:none;width:100%;margin-bottom:12px;box-sizing:border-box;overflow:visible;--iron-autogrow-textarea:{border:2px solid var(--primary-color);border-radius:5px;padding:20px;box-sizing:border-box;};}@media (max-width: 500px){iron-autogrow-textarea{--iron-autogrow-textarea:{border:2px solid var(--primary-color);border-radius:5px;padding:20px;box-sizing:border-box;font-size:16px;};}}form{padding:0;margin:0;}.error-message{color:#db4437;font-size:90%;}</style><tweet-split-helper id="helper"></tweet-split-helper><form id="form" class="layout vertical"><iron-autogrow-textarea rows="5" id="messageInput" bind-value="{{message}}" auto-validate=""></iron-autogrow-textarea><div class="layout horizontal end"><div class="error-message flex-auto self-start">[[_error.message]]</div><button id="submitButton" class="flex-none" type="submit" disabled$="[[_error]]">Tweet</button></div></form></template><script>var TweetInput=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'_computeErrorWhenValidate',value:function(d,e){return d?this._canSplitMessage(d)?null:new Error(e):new Error}},{key:'_validate',value:function(d){this.set('_error',this._computeErrorWhenValidate(d,this.splitErrorMessage))}},{key:'_messageChanged',value:function(d){var e=this;this._debouncer=Polymer.Debouncer.debounce(this._debouncer,Polymer.Async.timeOut.after(250),function(){return e._validate(d)})}},{key:'_sendMessage',value:function(){if(!this._error){var d=new CustomEvent('send-message',{detail:{message:this.message}});this.dispatchEvent(d),this.set('message','')}}},{key:'connectedCallback',value:function(){var d=this;babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'connectedCallback',this).call(this),this.$.form.addEventListener('submit',function(e){e.preventDefault(),d._sendMessage()})}},{key:'ready',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'ready',this).call(this),this._validate(this.message)}},{key:'_canSplitMessage',value:function(d){return!!this.$.helper.splitMessage(d)}}],[{key:'is',get:function(){return'tweet-input'}},{key:'properties',get:function(){return{message:{type:String,observer:'_messageChanged',value:''},valid:{type:Boolean,value:!1},_error:{type:Error,value:new Error},splitErrorMessage:{type:String,value:'We can\'t send your tweet because it\'s unbreakable.'}}}}]),b}(Polymer.Element);window.customElements.define(TweetInput.is,TweetInput);</script></dom-module></body></html>