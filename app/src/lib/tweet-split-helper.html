<html><head><link rel="import" href="../../bower_components/polymer/polymer-element.html"></head><body><dom-module id="tweet-split-helper"><script>var TweetSplitHelper=function(a){function b(){babelHelpers.classCallCheck(this,b);var c=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c.PART_MAX_LENGTH=50,c}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,null,[{key:'is',get:function(){return'tweet-split-helper'}}]),babelHelpers.createClass(b,[{key:'_getIndicatorLength',value:function(d,e){return d+e+2}},{key:'_countNumbersHavingLength',value:function(d){return Math.pow(10,d)-Math.pow(10,d-1)}},{key:'_getSplittingPattern',value:function(d,e){var f=this.PART_MAX_LENGTH-this._getIndicatorLength(d,e),g='(.{1,'+f+'})(?:\\s|\\n|$)+',h=this._countNumbersHavingLength(d);return{part:new RegExp(g),group:new RegExp('^((?:'+g+'){'+('1,'+h)+'})')}}},{key:'_attempToSplitMessage',value:function(d,e){if(this.PART_MAX_LENGTH*Math.pow(10,d-3)>e.length)throw new Error('The message can not be splited');for(var f=0,g=e,h=[],j=1;j<=d;++j){var k,l=this._getSplittingPattern(j,d),m=l.group.exec(g);if(!m)break;var n=m[0];g=g.slice(n.length);var o=n.split(l.part).filter(function(p){return 0<p.length});f+=n.length,h=(k=h).concat.apply(k,babelHelpers.toConsumableArray(o))}return f<e.length?this._attempToSplitMessage(d+1,e):h}},{key:'_fillIndicator',value:function(d,e,f){return e+1+'/'+f.length+' '+d}},{key:'splitMessage',value:function(d){if(!d)return null;if(d.length<=this.PART_MAX_LENGTH)return[d];var e=(parseInt(d.length/this.PART_MAX_LENGTH)+'').length;try{var f=this._attempToSplitMessage(e,d),g=f.map(this._fillIndicator);return g}catch(h){return null}}}]),b}(HTMLElement);window.customElements.define(TweetSplitHelper.is,TweetSplitHelper);</script></dom-module></body></html>