<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1,user-scalable=yes"><title>tweet-input test</title>
    <script>if (!window.customElements) { document.write('<!--'); }</script>
    <script type="text/javascript" src="../../bower_components/webcomponentsjs/custom-elements-es5-adapter.js"></script>
    <!--! do not remove -->
<script src="../../bower_components/webcomponentsjs/webcomponents-lite.js"></script><script src="../../bower_components/web-component-tester/browser.js"></script><link rel="import" href="../../src/components/tweet-input.html"></head><body><test-fixture id="BasicTestFixture"><template><tweet-input></tweet-input></template></test-fixture><script>suite('Unit test',function(){var a;setup(function(){a=fixture('BasicTestFixture')}),suite('_computeErrorWhenValidate',function(){test('should return an Error instance when message is empty',function(){sinon.stub(a,'_canSplitMessage',function(){return!0}),expect(a._computeErrorWhenValidate('','')instanceof Error).to.be.true}),test('should return an Error with message when splitting is impossible',function(){sinon.stub(a,'_canSplitMessage',function(){return!1});var b=a._computeErrorWhenValidate('message','error-message');expect(b instanceof Error).to.be.true,expect(b.message).to.be.equal('error-message')}),test('should return null when message is valid',function(){var b=fixture('BasicTestFixture');sinon.stub(b,'_canSplitMessage',function(){return!0}),expect(b._computeErrorWhenValidate('message','error-message')).to.be.null})}),suite('_sendMessage',function(){test('if no error, should dispatch event send-message when executed',function(){sinon.spy(a,'dispatchEvent'),a._error=null,a._sendMessage(),expect(a.dispatchEvent).to.have.been.called}),test('if error,should not dispatch event send-message',function(){sinon.spy(a,'dispatchEvent'),a._error=new Error,a._sendMessage(),expect(a.dispatchEvent).to.have.not.been.called})}),suite('_canSplitMessage',function(){test('should return true when splitMessage success',function(){sinon.stub(a.$.helper,'splitMessage',function(){return['abc']}),expect(a._canSplitMessage('abc')).to.be.true}),test('should return false when splitMessage failed',function(){sinon.stub(a.$.helper,'splitMessage',function(){return null}),expect(a._canSplitMessage('abc')).to.be.false})}),suite('_messageChanged',function(){test('should trigger validate after 250ms',function(b){sinon.spy(a,'_validate'),a._messageChanged('abc'),setTimeout(function(){expect(a._validate).has.been.called,b()},500)})}),suite('connectedCallback',function(){test('should add event listener to form',function(){sinon.spy(a,'_sendMessage'),a.$.form.dispatchEvent(new CustomEvent('submit')),expect(a._sendMessage).to.have.been.called})})});</script></body></html>