<html><head><link rel="import" href="boot.html"><link rel="import" href="async.html"><link rel="import" href="debounce.html"><script>(function(){'use strict';function a(G){for(var J,H=B?['click']:v,I=0;I<H.length;I++)J=H[I],G?document.addEventListener(J,D,!0):document.removeEventListener(J,D,!0)}function c(G){var H=G.type;if(-1===v.indexOf(H))return!1;if('mousemove'===H){var I=void 0===G.buttons?1:G.buttons;return G instanceof window.MouseEvent&&!z&&(I=w[G.which]||0),!!(1&I)}var J=void 0===G.button?0:G.button;return 0===J}function d(G){if('click'===G.type){if(0===G.detail)return!0;var H=F._findOriginalTarget(G);if(!H.nodeType||H.nodeType!==Node.ELEMENT_NODE)return!0;var I=H.getBoundingClientRect(),J=G.pageX,K=G.pageY;return!(J>=I.left&&J<=I.right&&K>=I.top&&K<=I.bottom)}return!1}function f(G){var H='auto',I=G.composedPath&&G.composedPath();if(I)for(var K,J=0;J<I.length;J++)if(K=I[J],K[o]){H=K[o];break}return H}function g(G,H,I){G.movefn=H,G.upfn=I,document.addEventListener('mousemove',H),document.addEventListener('mouseup',I)}function h(G){document.removeEventListener('mousemove',G.movefn),document.removeEventListener('mouseup',G.upfn),G.movefn=null,G.upfn=null}var k='string'===typeof document.head.style.touchAction,l='__polymerGestures',m='__polymerGesturesHandled',o='__polymerGesturesTouchAction',p=25,q=5,v=['mousedown','mousemove','mouseup','click'],w=[0,1,4,2],z=function(){try{return 1===new MouseEvent('test',{buttons:1}).buttons}catch(G){return!1}}(),A=!1;(function(){try{var G=Object.defineProperty({},'passive',{get:function(){A=!0}});window.addEventListener('test',null,G),window.removeEventListener('test',null,G)}catch(H){}})();var B=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/),C=function(){};C.prototype.reset=function(){},C.prototype.mousedown,C.prototype.mousemove,C.prototype.mouseup,C.prototype.touchstart,C.prototype.touchmove,C.prototype.touchend,C.prototype.click;var D=function(H){var I=H.sourceCapabilities;if((!I||I.firesTouchEvents)&&(H[m]={skip:!0},'click'===H.type)){var J=H.composedPath&&H.composedPath();if(J)for(var K=0;K<J.length;K++)if(J[K]===E.mouse.target)return;H.preventDefault(),H.stopPropagation()}},E={mouse:{target:null,mouseIgnoreJob:null},touch:{x:0,y:0,id:-1,scrollDecided:!1}};document.addEventListener('touchend',function(G){E.mouse.mouseIgnoreJob||a(!0);E.mouse.target=G.composedPath()[0],E.mouse.mouseIgnoreJob=Polymer.Debouncer.debounce(E.mouse.mouseIgnoreJob,Polymer.Async.timeOut.after(2500),function(){a(),E.mouse.target=null,E.mouse.mouseIgnoreJob=null})},!!A&&{passive:!0});var F={gestures:{},recognizers:[],deepTargetFind:function(H,I){for(var L,J=document.elementFromPoint(H,I),K=J;K&&K.shadowRoot&&!window.ShadyDOM&&(L=K,K=K.shadowRoot.elementFromPoint(H,I),L!==K);)K&&(J=K);return J},_findOriginalTarget:function(H){return H.composedPath?H.composedPath()[0]:H.target},_handleNative:function(H){var I,J=H.type,K=H.currentTarget,L=K[l];if(L){var M=L[J];if(M){if(!H[m]&&(H[m]={},'touch'===J.slice(0,5))){H=H;var N=H.changedTouches[0];if('touchstart'===J&&1===H.touches.length&&(E.touch.id=N.identifier),E.touch.id!==N.identifier)return;k||'touchstart'!==J&&'touchmove'!==J||F._handleTouchAction(H)}if(I=H[m],!I.skip){for(var Q,O=F.recognizers,P=0;P<O.length;P++)Q=O[P],M[Q.name]&&!I[Q.name]&&Q.flow&&-1<Q.flow.start.indexOf(H.type)&&Q.reset&&Q.reset();for(var S,R=0;R<O.length;R++)S=O[R],M[S.name]&&!I[S.name]&&(I[S.name]=!0,S[J](H))}}}},_handleTouchAction:function(H){var I=H.changedTouches[0],J=H.type;if('touchstart'===J)E.touch.x=I.clientX,E.touch.y=I.clientY,E.touch.scrollDecided=!1;else if('touchmove'===J){if(E.touch.scrollDecided)return;E.touch.scrollDecided=!0;var K=f(H),L=!1,M=Math.abs(E.touch.x-I.clientX),N=Math.abs(E.touch.y-I.clientY);H.cancelable&&('none'===K?L=!0:'pan-x'===K?L=N>M:'pan-y'===K&&(L=M>N)),L?H.preventDefault():F.prevent('track')}},addListener:function(H,I,J){return!!this.gestures[I]&&(this._add(H,I,J),!0)},removeListener:function(H,I,J){return!!this.gestures[I]&&(this._remove(H,I,J),!0)},_add:function(H,I,J){var K=this.gestures[I],L=K.deps,M=K.name,N=H[l];N||(H[l]=N={});for(var P,Q,O=0;O<L.length;O++)(P=L[O],!(B&&-1<v.indexOf(P)&&'click'!==P))&&(Q=N[P],Q||(N[P]=Q={_count:0}),0===Q._count&&H.addEventListener(P,this._handleNative),Q[M]=(Q[M]||0)+1,Q._count=(Q._count||0)+1);H.addEventListener(I,J),K.touchAction&&this.setTouchAction(H,K.touchAction)},_remove:function(H,I,J){var K=this.gestures[I],L=K.deps,M=K.name,N=H[l];if(N)for(var P,Q,O=0;O<L.length;O++)P=L[O],Q=N[P],Q&&Q[M]&&(Q[M]=(Q[M]||1)-1,Q._count=(Q._count||1)-1,0===Q._count&&H.removeEventListener(P,this._handleNative));H.removeEventListener(I,J)},register:function(H){this.recognizers.push(H);for(var I=0;I<H.emits.length;I++)this.gestures[H.emits[I]]=H},_findRecognizerByEvent:function(H){for(var J,I=0;I<this.recognizers.length;I++){J=this.recognizers[I];for(var L,K=0;K<J.emits.length;K++)if(L=J.emits[K],L===H)return J}return null},setTouchAction:function(H,I){k&&(H.style.touchAction=I),H[o]=I},_fire:function(H,I,J){var K=new Event(I,{bubbles:!0,cancelable:!0,composed:!0});if(K.detail=J,H.dispatchEvent(K),K.defaultPrevented){var L=J.preventer||J.sourceEvent;L&&L.preventDefault&&L.preventDefault()}},prevent:function(H){var I=this._findRecognizerByEvent(H);I.info&&(I.info.prevent=!0)},resetMouseCanceller:function(){E.mouse.mouseIgnoreJob&&E.mouse.mouseIgnoreJob.flush()}};F.register({name:'downup',deps:['mousedown','touchstart','touchend'],flow:{start:['mousedown','touchstart'],end:['mouseup','touchend']},emits:['down','up'],info:{movefn:null,upfn:null},reset:function(){h(this.info)},mousedown:function(H){if(c(H)){var I=F._findOriginalTarget(H),J=this,K=function(N){c(N)||(J._fire('up',I,N),h(J.info))},L=function(N){c(N)&&J._fire('up',I,N),h(J.info)};g(this.info,K,L),this._fire('down',I,H)}},touchstart:function(H){this._fire('down',F._findOriginalTarget(H),H.changedTouches[0],H)},touchend:function(H){this._fire('up',F._findOriginalTarget(H),H.changedTouches[0],H)},_fire:function(H,I,J,K){F._fire(I,H,{x:J.clientX,y:J.clientY,sourceEvent:J,preventer:K,prevent:function(M){return F.prevent(M)}})}}),F.register({name:'track',touchAction:'none',deps:['mousedown','touchstart','touchmove','touchend'],flow:{start:['mousedown','touchstart'],end:['mouseup','touchend']},emits:['track'],info:{x:0,y:0,state:'start',started:!1,moves:[],addMove:function(H){this.moves.length>2&&this.moves.shift(),this.moves.push(H)},movefn:null,upfn:null,prevent:!1},reset:function(){this.info.state='start',this.info.started=!1,this.info.moves=[],this.info.x=0,this.info.y=0,this.info.prevent=!1,h(this.info)},hasMovedEnough:function(H,I){if(this.info.prevent)return!1;if(this.info.started)return!0;var J=Math.abs(this.info.x-H),K=Math.abs(this.info.y-I);return J>=q||K>=q},mousedown:function(H){if(c(H)){var I=F._findOriginalTarget(H),J=this,K=function(N){var O=N.clientX,P=N.clientY;J.hasMovedEnough(O,P)&&(J.info.state=J.info.started?'mouseup'===N.type?'end':'track':'start','start'===J.info.state&&F.prevent('tap'),J.info.addMove({x:O,y:P}),!c(N)&&(J.info.state='end',h(J.info)),J._fire(I,N),J.info.started=!0)},L=function(N){J.info.started&&K(N),h(J.info)};g(this.info,K,L),this.info.x=H.clientX,this.info.y=H.clientY}},touchstart:function(H){var I=H.changedTouches[0];this.info.x=I.clientX,this.info.y=I.clientY},touchmove:function(H){var I=F._findOriginalTarget(H),J=H.changedTouches[0],K=J.clientX,L=J.clientY;this.hasMovedEnough(K,L)&&('start'===this.info.state&&F.prevent('tap'),this.info.addMove({x:K,y:L}),this._fire(I,J),this.info.state='track',this.info.started=!0)},touchend:function(H){var I=F._findOriginalTarget(H),J=H.changedTouches[0];this.info.started&&(this.info.state='end',this.info.addMove({x:J.clientX,y:J.clientY}),this._fire(I,J,H))},_fire:function(H,I){var J=this.info.moves[this.info.moves.length-2],K=this.info.moves[this.info.moves.length-1],L=K.x-this.info.x,M=K.y-this.info.y,N,O=0;J&&(N=K.x-J.x,O=K.y-J.y),F._fire(H,'track',{state:this.info.state,x:I.clientX,y:I.clientY,dx:L,dy:M,ddx:N,ddy:O,sourceEvent:I,hover:function(){return F.deepTargetFind(I.clientX,I.clientY)}})}}),F.register({name:'tap',deps:['mousedown','click','touchstart','touchend'],flow:{start:['mousedown','touchstart'],end:['click','touchend']},emits:['tap'],info:{x:NaN,y:NaN,prevent:!1},reset:function(){this.info.x=NaN,this.info.y=NaN,this.info.prevent=!1},save:function(H){this.info.x=H.clientX,this.info.y=H.clientY},mousedown:function(H){c(H)&&this.save(H)},click:function(H){c(H)&&this.forward(H)},touchstart:function(H){this.save(H.changedTouches[0],H)},touchend:function(H){this.forward(H.changedTouches[0],H)},forward:function(H,I){var J=Math.abs(H.clientX-this.info.x),K=Math.abs(H.clientY-this.info.y),L=F._findOriginalTarget(H);(isNaN(J)||isNaN(K)||J<=p&&K<=p||d(H))&&!this.info.prevent&&F._fire(L,'tap',{x:H.clientX,y:H.clientY,sourceEvent:H,preventer:I})}}),F.findOriginalTarget=F._findOriginalTarget,F.add=F.addListener,F.remove=F.removeListener,Polymer.Gestures=F})();</script></head><body></body></html>