<!DOCTYPE html><html><head><meta charset="UTF-8"><title>test for app-drawer-layout</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
    <script>if (!window.customElements) { document.write('<!--'); }</script>
    <script type="text/javascript" src="../../../webcomponentsjs/custom-elements-es5-adapter.js"></script>
    <!--! do not remove -->
<script src="../../../webcomponentsjs/webcomponents-lite.js"></script><script src="../../../web-component-tester/browser.js"></script><script src="../../../test-fixture/test-fixture-mocha.js"></script><link rel="import" href="../../../iron-resizable-behavior/iron-resizable-behavior.html"><link rel="import" href="../../../test-fixture/test-fixture.html"><link rel="import" href="../../app-drawer/app-drawer.html"><link rel="import" href="../app-drawer-layout.html"></head><body><custom-style><style is="custom-style">body{margin:0;padding:0;}app-drawer-layout{width:1000px;--app-drawer-content-container:{background-color:cyan;};}</style></custom-style><test-fixture id="testDrawerLayout"><template><app-drawer-layout><app-drawer slot="drawer">Drawer</app-drawer><div drawer-toggle="">Toggle</div><p>Content</p><x-resizeable></x-resizeable></app-drawer-layout></template></test-fixture><script>HTMLImports.whenReady(function(){Polymer({is:'x-resizeable',behaviors:[Polymer.IronResizableBehavior]})}),suite('basic features',function(){var a,b;setup(function(){a=fixture('testDrawerLayout'),b=a.querySelector('app-drawer'),Polymer.dom.flush()}),test('default values',function(){assert.isFalse(a.forceNarrow),assert.equal(a.responsiveWidth,'640px'),assert.isFalse(a.openedWhenNarrow)}),test('get drawer',function(){assert.equal(a.drawer,b)}),test('forceNarrow',function(){a.responsiveWidth='0px',a.forceNarrow=!0,assert.isTrue(a.narrow)}),test('responsiveWidth',function(c){var d=a.querySelector('x-resizeable'),e=sinon.spy(d,'notifyResize');a.responsiveWidth='0px',window.setTimeout(function(){assert.isFalse(a.narrow),assert.isTrue(b.opened),assert.isTrue(e.called),e.reset(),a.responsiveWidth='10000px',window.setTimeout(function(){assert.isTrue(a.narrow),assert.isFalse(b.opened),assert.isTrue(e.called),c()},150)},150)}),test('drawer-toggle',function(c){a.responsiveWidth='10000px',assert.isFalse(b.opened),Polymer.Base.fire('click',null,{node:a.querySelector('p')}),assert.isFalse(b.opened),Polymer.Base.fire('click',null,{node:a.querySelector('[drawer-toggle]')}),assert.isTrue(b.opened),a.responsiveWidth='0px',window.setTimeout(function(){Polymer.Base.fire('click',null,{node:a.querySelector('[drawer-toggle]')}),assert.isTrue(b.opened),c()},150)}),test('disable initial drawer transition',function(c){assert.isTrue(b.hasAttribute('no-transition')),Polymer.dom.flush(),window.setTimeout(function(){assert.isFalse(b.hasAttribute('no-transition')),c()},150)}),test('content layout',function(c){a.responsiveWidth='10000px',window.setTimeout(function(){var d=a.$.contentContainer,e=window.getComputedStyle(d);assert.equal(e.marginLeft,'0px'),assert.equal(e.marginRight,'0px'),a.responsiveWidth='0px',window.setTimeout(function(){e=window.getComputedStyle(d),assert.equal(e.marginLeft,'256px'),assert.equal(e.marginRight,'0px'),b.align='right',window.setTimeout(function(){e=window.getComputedStyle(d),assert.equal(e.marginLeft,'0px'),assert.equal(e.marginRight,'256px'),c()},100)},100)},100)}),test('iron-resize triggers content layout',function(){var c=sinon.spy(a,'resetLayout');assert.isFalse(c.called),a.notifyResize(),assert.isTrue(c.called),c.restore()}),test('openedWhenNarrow',function(c){a.openedWhenNarrow=!0,a.responsiveWidth='0px',window.setTimeout(function(){assert.isFalse(a.narrow),assert.isTrue(b.opened),a.responsiveWidth='10000px',window.setTimeout(function(){assert.isTrue(a.narrow),assert.isTrue(b.opened),c()},100)},100)}),test('app-drawer appended later',function(c){assert.doesNotThrow(function(){a=document.body.appendChild(document.createElement('app-drawer-layout'))}),Polymer.dom.flush();var d=a.$.contentContainer,e=window.getComputedStyle(d);assert.isUndefined(a.drawer),assert.equal(e.marginLeft,'0px'),assert.equal(e.marginRight,'0px'),a.responsiveWidth='0px',b=document.createElement('app-drawer'),b.setAttribute('slot','drawer'),Polymer.dom(a).appendChild(b),Polymer.dom.flush(),window.setTimeout(function(){e=window.getComputedStyle(d),assert.isTrue(a.drawer.opened),assert.equal(e.marginLeft,'256px'),assert.equal(e.marginRight,'0px'),c()},100)})});</script></body></html>