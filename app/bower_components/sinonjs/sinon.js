(function(d,y){'use strict';'function'===typeof define&&define.amd?define('sinon',[],function(){return d.sinon=y()}):'object'===('undefined'===typeof exports?'undefined':babelHelpers.typeof(exports))?module.exports=y():d.sinon=y()})(this,function(){'use strict';var samsam,formatio,lolex;(function(){function define(d,y,g){'samsam'==d?samsam=y():'function'===typeof y&&0===d.length?lolex=y():'function'===typeof g&&(formatio=g(samsam))}define.amd={},('function'===typeof define&&define.amd&&function(d){define('samsam',d)}||'object'===('undefined'===typeof module?'undefined':babelHelpers.typeof(module))&&function(d){module.exports=d()}||function(d){this.samsam=d()})(function(){function d(N){return'number'===typeof N&&N!==N}function y(N){return I.toString.call(N).split(/[ \]]/)[1]}function g(N){if('Arguments'===y(N))return!0;if('object'!==('undefined'===typeof N?'undefined':babelHelpers.typeof(N))||'number'!==typeof N.length||'Array'===y(N))return!1;if('function'==typeof N.callee)return!0;try{N[N.length]=6,delete N[N.length]}catch(D){return!0}return!1}function w(N){if(!N||1!==N.nodeType||!P)return!1;try{N.appendChild(P),N.removeChild(P)}catch(D){return!1}return!0}function A(N){var L,D=[];for(L in N)I.hasOwnProperty.call(N,L)&&D.push(L);return D}function E(N){return'function'==typeof N.getTime&&N.getTime()==N.valueOf()}function T(N){return 0===N&&1/N===-Infinity}function S(N,D){if(N===D||d(N)&&d(D))return 0!==N||T(N)===T(D)}function R(N,D){if(0===D.length)return!0;var L,M,X,H;for(L=0,M=N.length;L<M;++L)if(q(N[L],D[0])){for(X=0,H=D.length;X<H;++X)if(!q(N[L+X],D[X]))return!1;return!0}return!1}var q,I=Object.prototype,P='undefined'!==typeof document&&document.createElement('div');return q=function N(D,L){if(L&&'function'===typeof L.test)return L.test(D);if('function'===typeof L)return!0===L(D);if('string'===typeof L){L=L.toLowerCase();return('string'===typeof D||!!D)&&0<=(D+'').toLowerCase().indexOf(L)}if('number'===typeof L)return L===D;if('boolean'===typeof L)return L===D;if('undefined'===typeof L)return'undefined'===typeof D;if(null===L)return null===D;if('Array'===y(D)&&'Array'===y(L))return R(D,L);if(L&&'object'===('undefined'===typeof L?'undefined':babelHelpers.typeof(L))){if(L===D)return!0;for(var X in L){var H=D[X];if('undefined'===typeof H&&'function'===typeof D.getAttribute&&(H=D.getAttribute(X)),null===L[X]||'undefined'===typeof L[X]){if(H!==L[X])return!1;}else if('undefined'===typeof H||!N(H,L[X]))return!1}return!0}throw new Error('Matcher was not a string, a number, a function, a boolean or an object')},{isArguments:g,isElement:w,isDate:E,isNegZero:T,identical:S,deepEqual:function(N,D){function L(U){return'object'!==('undefined'===typeof U?'undefined':babelHelpers.typeof(U))||null===U||U instanceof Boolean||U instanceof Date||U instanceof Number||U instanceof RegExp||U instanceof String?!1:!0}function M(U,G){var K;for(K=0;K<U.length;K++)if(U[K]===G)return K;return-1}var X=[],H=[],W=[],V=[],B={};return function U(G,K,z,$){var Z='undefined'===typeof G?'undefined':babelHelpers.typeof(G),J='undefined'===typeof K?'undefined':babelHelpers.typeof(K);if(G===K||d(G)||d(K)||null==G||null==K||'object'!==Z||'object'!==J)return S(G,K);if(w(G)||w(K))return!1;var Y=E(G),Q=E(K);if((Y||Q)&&(!Y||!Q||G.getTime()!==K.getTime()))return!1;if(G instanceof RegExp&&K instanceof RegExp&&G.toString()!==K.toString())return!1;var ee=y(G),te=y(K),ne=A(G),ae=A(K);if(g(G)||g(K)){if(G.length!==K.length)return!1;}else if(Z!==J||ee!==te||ne.length!==ae.length)return!1;var oe,re,se,le,ie,de,ce,ue,pe,fe,me;for(re=0,se=ne.length;re<se;re++){if(oe=ne[re],!I.hasOwnProperty.call(K,oe))return!1;if(le=G[oe],ie=K[oe],de=L(le),ce=L(ie),ue=de?M(X,le):-1,pe=ce?M(H,ie):-1,fe=-1===ue?z+'['+JSON.stringify(oe)+']':W[ue],me=-1===pe?$+'['+JSON.stringify(oe)+']':V[pe],B[fe+me])return!0;if(-1===ue&&de&&(X.push(le),W.push(fe)),-1===pe&&ce&&(H.push(ie),V.push(me)),de&&ce&&(B[fe+me]=!0),!U(le,ie,fe,me))return!1}return!0}(N,D,'$1','$2')},match:q,keys:A}}),('function'===typeof define&&define.amd&&function(d){define('formatio',['samsam'],d)}||'object'===('undefined'===typeof module?'undefined':babelHelpers.typeof(module))&&function(d){module.exports=d(require('samsam'))}||function(d){this.formatio=d(this.samsam)})(function(d){function y(R){if(!R)return'';if(R.displayName)return R.displayName;if(R.name)return R.name;var I=R.toString().match(/function\s+([^\(]+)/m);return I&&I[1]||''}function g(R,I){var N,D,P=y(I&&I.constructor),q=R.excludeConstructors||T.excludeConstructors||[];for(N=0,D=q.length;N<D;++N){if('string'===typeof q[N]&&q[N]===P)return'';if(q[N].test&&q[N].test(P))return''}return P}function w(R,I){if('object'!==('undefined'===typeof R?'undefined':babelHelpers.typeof(R)))return!1;var P,q;for(P=0,q=I.length;P<q;++P)if(I[P]===R)return!0;return!1}function A(R,I,P,q){if('string'===typeof I){var N=R.quoteStrings;return P||'boolean'!==typeof N||N?'"'+I+'"':I}if('function'===typeof I&&!(I instanceof RegExp))return A.func(I);if(P=P||[],w(I,P))return'[Circular]';if('[object Array]'===Object.prototype.toString.call(I))return A.array.call(R,I,P);if(!I)return(1/I===-Infinity?'-0':I)+'';if(d.isElement(I))return A.element(I);if('function'===typeof I.toString&&I.toString!==Object.prototype.toString)return I.toString();var L,M;for(L=0,M=O.length;L<M;L++)if(I===O[L].object)return O[L].value;return A.object.call(R,I,P,q)}function E(R){for(var I in R)this[I]=R[I]}var T={excludeConstructors:['Object',/^.$/],quoteStrings:!0,limitChildrenCount:0},S=Object.prototype.hasOwnProperty,O=[];return'undefined'!==typeof global&&O.push({object:global,value:'[object global]'}),'undefined'!==typeof document&&O.push({object:document,value:'[object HTMLDocument]'}),'undefined'!==typeof window&&O.push({object:window,value:'[object Window]'}),A.func=function(R){return'function '+y(R)+'() {}'},A.array=function(R,I){I=I||[],I.push(R);var q,N,P=[];for(N=0<this.limitChildrenCount?Math.min(this.limitChildrenCount,R.length):R.length,q=0;q<N;++q)P.push(A(this,R[q],I));return N<R.length&&P.push('[... '+(R.length-N)+' more elements]'),'['+P.join(', ')+']'},A.object=function(R,I,P){I=I||[],I.push(R),P=P||0;var L,M,X,H,W,V,q=[],N=d.keys(R).sort(),D=3;for(V=0<this.limitChildrenCount?Math.min(this.limitChildrenCount,N.length):N.length,H=0;H<V;++H)L=N[H],X=R[L],M=w(X,I)?'[Circular]':A(this,X,I,P+2),M=(/\s/.test(L)?'"'+L+'"':L)+': '+M,D+=M.length,q.push(M);var B=g(this,R),U=B?'['+B+'] ':'',G='';for(H=0,W=P;H<W;++H)G+=' ';return V<N.length&&q.push('[... '+(N.length-V)+' more elements]'),80<D+P?U+'{\n  '+G+q.join(',\n  '+G)+'\n'+G+'}':U+'{ '+q.join(', ')+' }'},A.element=function(R){var q,D,L,M,X,I=R.tagName.toLowerCase(),P=R.attributes,N=[];for(L=0,M=P.length;L<M;++L)q=P.item(L),D=q.nodeName.toLowerCase().replace('html:',''),X=q.nodeValue,'contenteditable'===D&&'inherit'===X||!X||N.push(D+'="'+X+'"');var H='<'+I+(0<N.length?' ':''),W=R.innerHTML;20<W.length&&(W=W.substr(0,20)+'[...]');var V=H+N.join(' ')+'>'+W+'</'+I+'>';return V.replace(/ contentEditable="inherit"/,'')},E.prototype={functionName:y,configure:function(I){return new E(I)},constructorName:function(I){return g(this,I)},ascii:function(I,P,q){return A(this,I,P,q)}},E.prototype}),!function(d){if('object'==('undefined'===typeof exports?'undefined':babelHelpers.typeof(exports))&&'undefined'!=typeof module)module.exports=d();else if('function'==typeof define&&define.amd)define([],d);else{var y;'undefined'==typeof window?'undefined'==typeof global?'undefined'!=typeof self&&(y=self):y=global:y=window,y.lolex=d()}}(function(){var define,module,exports;return function d(y,g,w){function A(S,O){if(!g[S]){if(!y[S]){var R='function'==typeof require&&require;if(!O&&R)return R(S,!0);if(E)return E(S,!0);var I=new Error('Cannot find module \''+S+'\'');throw I.code='MODULE_NOT_FOUND',I}var P=g[S]={exports:{}};y[S][0].call(P.exports,function(q){var N=y[S][1][q];return A(N?N:q)},P,P.exports,d,y,g,w)}return g[S].exports}for(var E='function'==typeof require&&require,T=0;T<w.length;T++)A(w[T]);return A}({1:[function(require,module,exports){(function(global){(function(global){function parseTime(d){if(!d)return 0;var E,y=d.split(':'),g=y.length,w=g,A=0;if(3<g||!/^(\d\d:){0,2}\d\d?$/.test(d))throw new Error('tick only understands numbers and \'h:m:s\'');for(;w--;){if(E=parseInt(y[w],10),60<=E)throw new Error('Invalid time '+d);A+=E*Math.pow(60,g-w-1)}return 1e3*A}function getEpoch(d){if(!d)return 0;if('function'===typeof d.getTime)return d.getTime();if('number'===typeof d)return d;throw new TypeError('now should be milliseconds since UNIX epoch')}function inRange(d,y,g){return g&&g.callAt>=d&&g.callAt<=y}function mirrorDateProperties(d,y){for(var g in y)y.hasOwnProperty(g)&&(d[g]=y[g]);return y.now?d.now=function(){return d.clock.now}:delete d.now,y.toSource?d.toSource=function(){return y.toSource()}:delete d.toSource,d.toString=function(){return y.toString()},d.prototype=y.prototype,d.parse=y.parse,d.UTC=y.UTC,d.prototype.toUTCString=y.prototype.toUTCString,d}function createDate(){function d(y,g,w,A,E,T,S){switch(arguments.length){case 0:return new NativeDate(d.clock.now);case 1:return new NativeDate(y);case 2:return new NativeDate(y,g);case 3:return new NativeDate(y,g,w);case 4:return new NativeDate(y,g,w,A);case 5:return new NativeDate(y,g,w,A,E);case 6:return new NativeDate(y,g,w,A,E,T);default:return new NativeDate(y,g,w,A,E,T,S);}}return mirrorDateProperties(d,NativeDate)}function addTimer(d,y){if(void 0===y.func)throw new Error('Callback must be provided to timer calls');return d.timers||(d.timers={}),y.id=uniqueTimerId++,y.createdAt=d.now,y.callAt=d.now+(y.delay||(d.duringTick?1:0)),d.timers[y.id]=y,addTimerReturnsObject?{id:y.id,ref:NOOP,unref:NOOP}:y.id}function compareTimers(d,y){return d.callAt<y.callAt?-1:d.callAt>y.callAt?1:d.immediate&&!y.immediate?-1:!d.immediate&&y.immediate?1:d.createdAt<y.createdAt?-1:d.createdAt>y.createdAt?1:d.id<y.id?-1:d.id>y.id?1:void 0}function firstTimerInRange(d,y,g){var E,T,w=d.timers,A=null;for(E in w)w.hasOwnProperty(E)&&(T=inRange(y,g,w[E]),T&&(!A||1===compareTimers(A,w[E]))&&(A=w[E]));return A}function callTimer(clock,timer){var exception;'number'===typeof timer.interval?clock.timers[timer.id].callAt+=timer.interval:delete clock.timers[timer.id];try{'function'===typeof timer.func?timer.func.apply(null,timer.args):eval(timer.func)}catch(d){exception=d}if(!clock.timers[timer.id]){if(exception)throw exception;return}if(exception)throw exception}function timerType(d){return d.immediate?'Immediate':'undefined'===typeof d.interval?'Timeout':'Interval'}function clearTimer(d,y,g){if(y&&(d.timers||(d.timers=[]),'object'===('undefined'===typeof y?'undefined':babelHelpers.typeof(y))&&(y=y.id),d.timers.hasOwnProperty(y))){var w=d.timers[y];if(timerType(w)===g)delete d.timers[y];else throw new Error('Cannot clear timer: timer created with set'+g+'() but cleared with clear'+timerType(w)+'()')}}function uninstall(d,y){var g,w,A;for(w=0,A=d.methods.length;w<A;w++)if(g=d.methods[w],y[g].hadOwnProperty)y[g]=d['_'+g];else try{delete y[g]}catch(E){}d.methods=[]}function hijackMethod(d,y,g){if(g[y].hadOwnProperty=Object.prototype.hasOwnProperty.call(d,y),g['_'+y]=d[y],'Date'===y){var A=mirrorDateProperties(g[y],d[y]);d[y]=A}else for(var w in d[y]=function(){return g[y].apply(g,arguments)},g[y])g[y].hasOwnProperty(w)&&(d[y][w]=g[y][w]);d[y].clock=g}function createClock(d){var y={now:getEpoch(d),timeouts:{},Date:createDate()};return y.Date.clock=y,y.setTimeout=function(w,A){return addTimer(y,{func:w,args:Array.prototype.slice.call(arguments,2),delay:A})},y.clearTimeout=function(w){return clearTimer(y,w,'Timeout')},y.setInterval=function(w,A){return addTimer(y,{func:w,args:Array.prototype.slice.call(arguments,2),delay:A,interval:A})},y.clearInterval=function(w){return clearTimer(y,w,'Interval')},y.setImmediate=function(w){return addTimer(y,{func:w,args:Array.prototype.slice.call(arguments,1),immediate:!0})},y.clearImmediate=function(w){return clearTimer(y,w,'Immediate')},y.tick=function(w){w='number'===typeof w?w:parseTime(w);var O,A=y.now,E=y.now+w,T=y.now,S=firstTimerInRange(y,A,E);y.duringTick=!0;for(var R;S&&A<=E;){if(y.timers[S.id]){A=y.now=S.callAt;try{O=y.now,callTimer(y,S),O!==y.now&&(A+=y.now-O,E+=y.now-O,T+=y.now-O)}catch(I){R=R||I}}S=firstTimerInRange(y,T,E),T=A}if(y.duringTick=!1,y.now=E,R)throw R;return y.now},y.reset=function(){y.timers={}},y.setSystemTime=function(w){var A=getEpoch(w),E=A-y.now;for(var T in y.now=A,y.timers)if(y.timers.hasOwnProperty(T)){var S=y.timers[T];S.createdAt+=E,S.callAt+=E}},y}var glbl=global;global.setTimeout=glbl.setTimeout,global.clearTimeout=glbl.clearTimeout,global.setInterval=glbl.setInterval,global.clearInterval=glbl.clearInterval,global.Date=glbl.Date,'setImmediate'in global&&(global.setImmediate=glbl.setImmediate,global.clearImmediate=glbl.clearImmediate);var NOOP=function(){},timeoutResult=setTimeout(NOOP,0),addTimerReturnsObject='object'===('undefined'===typeof timeoutResult?'undefined':babelHelpers.typeof(timeoutResult));clearTimeout(timeoutResult);var NativeDate=Date,uniqueTimerId=1,timers={setTimeout:setTimeout,clearTimeout:clearTimeout,setImmediate:global.setImmediate,clearImmediate:global.clearImmediate,setInterval:setInterval,clearInterval:clearInterval,Date:Date},keys=Object.keys||function(d){var g,y=[];for(g in d)d.hasOwnProperty(g)&&y.push(g);return y};exports.timers=timers,exports.createClock=createClock,exports.install=function(y,g,w){var A,E;'number'===typeof y&&(w=g,g=y,y=null),y||(y=global);var T=createClock(g);for(T.uninstall=function(){uninstall(T,y)},T.methods=w||[],0===T.methods.length&&(T.methods=keys(timers)),(A=0,E=T.methods.length);A<E;A++)hijackMethod(y,T.methods[A],T);return T}})(global||this)}).call(this,'undefined'===typeof global?'undefined'===typeof self?'undefined'===typeof window?{}:window:self:global)},{}]},{},[1])(1)})})();var define,sinon=function(){function d(A,E,T){y=T.exports=A('./sinon/util/core'),A('./sinon/extend'),A('./sinon/walk'),A('./sinon/typeOf'),A('./sinon/times_in_words'),A('./sinon/spy'),A('./sinon/call'),A('./sinon/behavior'),A('./sinon/stub'),A('./sinon/mock'),A('./sinon/collection'),A('./sinon/assert'),A('./sinon/sandbox'),A('./sinon/test'),A('./sinon/test_case'),A('./sinon/match'),A('./sinon/format'),A('./sinon/log_error')}var y,g='undefined'!==typeof module&&module.exports&&'function'===typeof require,w='function'===typeof define&&'object'===babelHelpers.typeof(define.amd)&&define.amd;return w?define(d):g?(d(require,module.exports,module),y=module.exports):y={},y}();return function(d){function y(D){var L=!1;try{D.appendChild(R),L=R.parentNode===D}catch(M){return!1}finally{try{D.removeChild(R)}catch(M){}}return L}function g(D){return R&&D&&1===D.nodeType&&y(D)}function w(D){return'function'===typeof D||!!(D&&D.constructor&&D.call&&D.apply)}function A(D){return'number'===typeof D&&isNaN(D)}function E(D,L){for(var M in L)I.call(D,M)||(D[M]=L[M])}function T(D){return'function'===typeof D&&'function'===typeof D.restore&&D.restore.sinon}function S(D){return D.wrapMethod=function(M,X,H){function W(Z){var J;if(!w(Z))J=new TypeError('Attempted to wrap '+('undefined'===typeof Z?'undefined':babelHelpers.typeof(Z))+' property '+X+' as function');else if(Z.restore&&Z.restore.sinon)J=new TypeError('Attempted to wrap '+X+' which is already wrapped');else if(Z.calledBefore){var Y=Z.returns?'stubbed':'spied on';J=new TypeError('Attempted to wrap '+X+' which is already '+Y)}if(J)throw Z&&Z.stackTrace&&(J.stack+='\n--------------\n'+Z.stackTrace),J}if(!M)throw new TypeError('Should wrap property of object');if('function'!==typeof H&&'object'!==('undefined'===typeof H?'undefined':babelHelpers.typeof(H)))throw new TypeError('Method wrapper should be a function or a property descriptor');var V,B,U,G=M.hasOwnProperty?M.hasOwnProperty(X):I.call(M,X);if(P){var K='function'===typeof H?{value:H}:H,z=D.getPropertyDescriptor(M,X);if(z?z.restore&&z.restore.sinon&&(V=new TypeError('Attempted to wrap '+X+' which is already wrapped')):V=new TypeError('Attempted to wrap '+('undefined'===typeof B?'undefined':babelHelpers.typeof(B))+' property '+X+' as function'),V)throw z&&z.stackTrace&&(V.stack+='\n--------------\n'+z.stackTrace),V;var $=D.objectKeys(K);for(U=0;U<$.length;U++)B=z[$[U]],W(B);for(E(K,z),U=0;U<$.length;U++)E(K[$[U]],z[$[U]]);Object.defineProperty(M,X,K)}else B=M[X],W(B),M[X]=H,H.displayName=X;return H.displayName=X,H.stackTrace=new Error('Stack Trace for original').stack,H.restore=function(){if(!G)try{delete M[X]}catch(Z){}else P&&Object.defineProperty(M,X,z);M[X]===H&&(M[X]=B)},H.restore.sinon=!0,P||E(H,B),H},D.create=function(M){var X=function(){};return X.prototype=M,new X},D.deepEqual=function L(M,X){if(D.match&&D.match.isMatcher(M))return M.test(X);if('object'!==('undefined'===typeof M?'undefined':babelHelpers.typeof(M))||'object'!==('undefined'===typeof X?'undefined':babelHelpers.typeof(X)))return A(M)&&A(X)||M===X;if(g(M)||g(X))return M===X;if(M===X)return!0;if(null===M&&null!==X||null!==M&&null===X)return!1;if(M instanceof RegExp&&X instanceof RegExp)return M.source===X.source&&M.global===X.global&&M.ignoreCase===X.ignoreCase&&M.multiline===X.multiline;var H=Object.prototype.toString.call(M);if(H!==Object.prototype.toString.call(X))return!1;if('[object Date]'===H)return M.valueOf()===X.valueOf();var W,V=0,B=0;if('[object Array]'===H&&M.length!==X.length)return!1;for(W in M)if(M.hasOwnProperty(W)){if(V+=1,!(W in X))return!1;if(!L(M[W],X[W]))return!1}for(W in X)X.hasOwnProperty(W)&&(B+=1);return V===B},D.functionName=function(M){var X=M.displayName||M.name;if(!X){var H=M.toString().match(/function ([^\s\(]+)/);X=H&&H[1]}return X},D.functionToString=function(){if(this.getCall&&this.callCount)for(var M,X,H=this.callCount;H--;)for(X in M=this.getCall(H).thisValue,M)if(M[X]===this)return X;return this.displayName||'sinon fake'},D.objectKeys=function(M){if(M!==Object(M))throw new TypeError('sinon.objectKeys called on a non-object');var H,X=[];for(H in M)I.call(M,H)&&X.push(H);return X},D.getPropertyDescriptor=function(M,X){for(var W,H=M;H&&!(W=Object.getOwnPropertyDescriptor(H,X));)H=Object.getPrototypeOf(H);return W},D.getConfig=function(L){var M={};L=L||{};var X=D.defaultConfig;for(var H in X)X.hasOwnProperty(H)&&(M[H]=L.hasOwnProperty(H)?L[H]:X[H]);return M},D.defaultConfig={injectIntoThis:!0,injectInto:null,properties:['spy','stub','mock','clock','server','requests'],useFakeTimers:!0,useFakeServer:!0},D.timesInWords=function(M){return 1===M&&'once'||2===M&&'twice'||3===M&&'thrice'||(M||0)+' times'},D.calledInOrder=function(L){for(var M=1,X=L.length;M<X;M++)if(!L[M-1].calledBefore(L[M])||!L[M].called)return!1;return!0},D.orderByFirstCall=function(L){return L.sort(function(M,X){var H=M.getCall(0),W=X.getCall(0),V=H&&H.callId||-1,B=W&&W.callId||-1;return V<B?-1:1})},D.createStubInstance=function(L){if('function'!==typeof L)throw new TypeError('The constructor should be a function.');return D.stub(D.create(L.prototype))},D.restore=function(L){if(null!==L&&'object'===('undefined'===typeof L?'undefined':babelHelpers.typeof(L)))for(var M in L)T(L[M])&&L[M].restore();else T(L)&&L.restore()},D}function O(D,L){S(L)}var R='undefined'!==typeof document&&document.createElement('div'),I=Object.prototype.hasOwnProperty,P='keys'in Object,q='undefined'!==typeof module&&module.exports&&'function'===typeof require,N='function'===typeof define&&'object'===babelHelpers.typeof(define.amd)&&define.amd;return N?void define(O):q?void O(require,module.exports,module):void(d&&S(d))}('object'===('undefined'===typeof sinon?'undefined':babelHelpers.typeof(sinon))&&sinon),function(d){function y(E){var S=function(){var O={constructor:function(){return'0'},toString:function(){return'1'},valueOf:function(){return'2'},toLocaleString:function(){return'3'},prototype:function(){return'4'},isPrototypeOf:function(){return'5'},propertyIsEnumerable:function(){return'6'},hasOwnProperty:function(){return'7'},length:function(){return'8'},unique:function(){return'9'}},R=[];for(var I in O)O.hasOwnProperty(I)&&R.push(O[I]());return'0123456789'!==R.join('')}();return E.extend=function(O){var I,P,q,R=Array.prototype.slice.call(arguments,1);for(P=0;P<R.length;P++){for(q in I=R[P],I)I.hasOwnProperty(q)&&(O[q]=I[q]);S&&I.hasOwnProperty('toString')&&I.toString!==O.toString&&(O.toString=I.toString)}return O},E.extend}function g(E,T,S){var O=E('./util/core');S.exports=y(O)}var w='undefined'!==typeof module&&module.exports&&'function'===typeof require,A='function'===typeof define&&'object'===babelHelpers.typeof(define.amd)&&define.amd;return A?void define(g):w?void g(require,module.exports,module):void(d&&y(d))}('object'===('undefined'===typeof sinon?'undefined':babelHelpers.typeof(sinon))&&sinon),function(d){function y(E){return E.timesInWords=function(S){return 1===S?'once':2===S?'twice':3===S?'thrice':(S||0)+' times'},E.timesInWords}function g(E,T,S){var O=E('./util/core');S.exports=y(O)}var w='undefined'!==typeof module&&module.exports&&'function'===typeof require,A='function'===typeof define&&'object'===babelHelpers.typeof(define.amd)&&define.amd;return A?void define(g):w?void g(require,module.exports,module):void(d&&y(d))}('object'===('undefined'===typeof sinon?'undefined':babelHelpers.typeof(sinon))&&sinon),function(d){function y(E){return E.typeOf=function(S){if(null===S)return'null';if(void 0===S)return'undefined';var O=Object.prototype.toString.call(S);return O.substring(8,O.length-1).toLowerCase()},E.typeOf}function g(E,T,S){var O=E('./util/core');S.exports=y(O)}var w='undefined'!==typeof module&&module.exports&&'function'===typeof require,A='function'===typeof define&&'object'===babelHelpers.typeof(define.amd)&&define.amd;return A?void define(g):w?void g(require,module.exports,module):void(d&&y(d))}('object'===('undefined'===typeof sinon?'undefined':babelHelpers.typeof(sinon))&&sinon),function(d){function y(E){function T(q,N,D){var L=E.typeOf(q);if(L!==N)throw new TypeError('Expected type of '+D+' to be '+N+', but was '+L)}function S(q){return P.isPrototypeOf(q)}function O(q,N){if(null===N||void 0===N)return!1;for(var D in q)if(q.hasOwnProperty(D)){var L=q[D],M=N[D];if(S(L)){if(!L.test(M))return!1;}else if('object'===E.typeOf(L)){if(!O(L,M))return!1;}else if(!E.deepEqual(L,M))return!1}return!0}function R(q,N){var D=E.create(P),L=E.typeOf(q);switch(L){case'object':if('function'===typeof q.test)return D.test=function(H){return!0===q.test(H)},D.message='match('+E.functionName(q.test)+')',D;var M=[];for(var X in q)q.hasOwnProperty(X)&&M.push(X+': '+q[X]);D.test=function(H){return O(q,H)},D.message='match('+M.join(', ')+')';break;case'number':D.test=function(H){return q==H};break;case'string':D.test=function(H){return'string'===typeof H&&-1!==H.indexOf(q)},D.message='match("'+q+'")';break;case'regexp':D.test=function(H){return'string'===typeof H&&q.test(H)};break;case'function':D.test=q,D.message=N?N:'match('+E.functionName(q)+')';break;default:D.test=function(H){return E.deepEqual(q,H)};}return D.message||(D.message='match('+q+')'),D}function I(q,N){return function(D,L){T(D,'string','property');var M=1===arguments.length,X=N+'("'+D+'"';return M||(X+=', '+L),X+=')',R(function(H){return void 0!==H&&null!==H&&q(H,D)&&(M||E.deepEqual(L,H[D]))},X)}}var P={toString:function(){return this.message}};return P.or=function(q){if(!arguments.length)throw new TypeError('Matcher expected');else S(q)||(q=R(q));var N=this,D=E.create(P);return D.test=function(L){return N.test(L)||q.test(L)},D.message=N.message+'.or('+q.message+')',D},P.and=function(q){if(!arguments.length)throw new TypeError('Matcher expected');else S(q)||(q=R(q));var N=this,D=E.create(P);return D.test=function(L){return N.test(L)&&q.test(L)},D.message=N.message+'.and('+q.message+')',D},R.isMatcher=S,R.any=R(function(){return!0},'any'),R.defined=R(function(q){return null!==q&&void 0!==q},'defined'),R.truthy=R(function(q){return!!q},'truthy'),R.falsy=R(function(q){return!q},'falsy'),R.same=function(q){return R(function(N){return q===N},'same('+q+')')},R.typeOf=function(q){return T(q,'string','type'),R(function(N){return E.typeOf(N)===q},'typeOf("'+q+'")')},R.instanceOf=function(q){return T(q,'function','type'),R(function(N){return N instanceof q},'instanceOf('+E.functionName(q)+')')},R.has=I(function(q,N){return'object'===('undefined'===typeof q?'undefined':babelHelpers.typeof(q))?N in q:void 0!==q[N]},'has'),R.hasOwn=I(function(q,N){return q.hasOwnProperty(N)},'hasOwn'),R.bool=R.typeOf('boolean'),R.number=R.typeOf('number'),R.string=R.typeOf('string'),R.object=R.typeOf('object'),R.func=R.typeOf('function'),R.array=R.typeOf('array'),R.regexp=R.typeOf('regexp'),R.date=R.typeOf('date'),E.match=R,R}function g(E,T,S){var O=E('./util/core');E('./typeOf'),S.exports=y(O)}var w='undefined'!==typeof module&&module.exports&&'function'===typeof require,A='function'===typeof define&&'object'===babelHelpers.typeof(define.amd)&&define.amd;return A?void define(g):w?void g(require,module.exports,module):void(d&&y(d))}('object'===('undefined'===typeof sinon?'undefined':babelHelpers.typeof(sinon))&&sinon),function(d,y){function g(T){function S(q){return''+q}var P,I='undefined'!==typeof module&&module.exports&&'function'===typeof require;if(I)try{y=require('formatio')}catch(q){}return P=y?function(){var N=y.configure({quoteStrings:!1,limitChildrenCount:250});return function(){return N.ascii.apply(N,arguments)}}():I?function(){try{var N=require('util')}catch(D){}return N?function(D){var L='object'===('undefined'===typeof D?'undefined':babelHelpers.typeof(D))&&D.toString===Object.prototype.toString;return L?N.inspect(D):D}:S}():S,T.format=P,T.format}function w(T,S,O){var R=T('./util/core');O.exports=g(R)}var A='undefined'!==typeof module&&module.exports&&'function'===typeof require,E='function'===typeof define&&'object'===babelHelpers.typeof(define.amd)&&define.amd;return E?void define(w):A?void w(require,module.exports,module):void(d&&g(d))}('object'===('undefined'===typeof sinon?'undefined':babelHelpers.typeof(sinon))&&sinon,'object'===('undefined'===typeof formatio?'undefined':babelHelpers.typeof(formatio))&&formatio),function(d){function y(T){function S(I,P,q){var N=T.functionName(I)+P;throw q.length&&(N+=' Received ['+w.call(q).join(', ')+']'),new Error(N)}function O(I,P,q,N,D,L,M){if('number'!==typeof L)throw new TypeError('Call id is not a number');var X=T.create(R);return X.proxy=I,X.thisValue=P,X.args=q,X.returnValue=N,X.exception=D,X.callId=L,X.stack=M,X}var R={calledOn:function(P){return T.match&&T.match.isMatcher(P)?P.test(this.thisValue):this.thisValue===P},calledWith:function(){var P=arguments.length;if(P>this.args.length)return!1;for(var q=0;q<P;q+=1)if(!T.deepEqual(arguments[q],this.args[q]))return!1;return!0},calledWithMatch:function(){var P=arguments.length;if(P>this.args.length)return!1;for(var q=0;q<P;q+=1){var N=this.args[q],D=arguments[q];if(!T.match||!T.match(D).test(N))return!1}return!0},calledWithExactly:function(){return arguments.length===this.args.length&&this.calledWith.apply(this,arguments)},notCalledWith:function(){return!this.calledWith.apply(this,arguments)},notCalledWithMatch:function(){return!this.calledWithMatch.apply(this,arguments)},returned:function(P){return T.deepEqual(P,this.returnValue)},threw:function(P){return'undefined'!==typeof P&&this.exception?this.exception===P||this.exception.name===P:!!this.exception},calledWithNew:function(){return this.proxy.prototype&&this.thisValue instanceof this.proxy},calledBefore:function(P){return this.callId<P.callId},calledAfter:function(P){return this.callId>P.callId},callArg:function(P){this.args[P]()},callArgOn:function(P,q){this.args[P].apply(q)},callArgWith:function(P){this.callArgOnWith.apply(this,[P,null].concat(w.call(arguments,1)))},callArgOnWith:function(P,q){var N=w.call(arguments,2);this.args[P].apply(q,N)},yield:function(){this.yieldOn.apply(this,[null].concat(w.call(arguments,0)))},yieldOn:function(P){for(var q=this.args,N=0,D=q.length;N<D;++N)if('function'===typeof q[N])return void q[N].apply(P,w.call(arguments,1));S(this.proxy,' cannot yield since no callback was passed.',q)},yieldTo:function(P){this.yieldToOn.apply(this,[P,null].concat(w.call(arguments,1)))},yieldToOn:function(P,q){for(var N=this.args,D=0,L=N.length;D<L;++D)if(N[D]&&'function'===typeof N[D][P])return void N[D][P].apply(q,w.call(arguments,2));S(this.proxy,' cannot yield to \''+P+'\' since no callback was passed.',N)},getStackFrames:function(){return this.stack&&this.stack.split('\n').slice(3)},toString:function(){for(var P=this.proxy.toString()+'(',q=[],N=0,D=this.args.length;N<D;++N)q.push(T.format(this.args[N]));return P=P+q.join(', ')+')','undefined'!==typeof this.returnValue&&(P+=' => '+T.format(this.returnValue)),this.exception&&(P+=' !'+this.exception.name,this.exception.message&&(P+='('+this.exception.message+')')),this.stack&&(P+=this.getStackFrames()[0].replace(/^\s*(?:at\s+|@)?/,' at ')),P}};return R.invokeCallback=R.yield,O.toString=R.toString,T.spyCall=O,O}function g(T,S,O){var R=T('./util/core');T('./match'),T('./format'),O.exports=y(R)}var w=Array.prototype.slice,A='undefined'!==typeof module&&module.exports&&'function'===typeof require,E='function'===typeof define&&'object'===babelHelpers.typeof(define.amd)&&define.amd;return E?void define(g):A?void g(require,module.exports,module):void(d&&y(d))}('object'===('undefined'===typeof sinon?'undefined':babelHelpers.typeof(sinon))&&sinon),function(sinonGlobal){function makeApi(sinon){function spy(d,y,g){if(!y&&'function'===typeof d)return spy.create(d);if(!d&&!y)return spy.create(function(){});if(g){for(var w=sinon.getPropertyDescriptor(d,y),A=0;A<g.length;A++)w[g[A]]=spy.create(w[g[A]]);return sinon.wrapMethod(d,y,w)}return sinon.wrapMethod(d,y,spy.create(d[y]))}function matchingFake(d,y,g){if(d)for(var w=0,A=d.length;w<A;w++)if(d[w].matches(y,g))return d[w]}function incrementCallCount(){this.called=!0,this.callCount+=1,this.notCalled=!1,this.calledOnce=1===this.callCount,this.calledTwice=2===this.callCount,this.calledThrice=3===this.callCount}function createCallProperties(){this.firstCall=this.getCall(0),this.secondCall=this.getCall(1),this.thirdCall=this.getCall(2),this.lastCall=this.getCall(this.callCount-1)}function createProxy(func,proxyLength){var p;return proxyLength?eval('p = (function proxy('+vars.substring(0,2*proxyLength-1)+') { return p.invoke(func, this, slice.call(arguments)); });'):p=function(){return p.invoke(func,this,slice.call(arguments))},p.isSinonProxy=!0,p}function delegateToCalls(d,y,g,w){spyApi[d]=function(){if(!this.called)return!!w&&w.apply(this,arguments);for(var A,E=0,T=0,S=this.callCount;T<S;T+=1)if(A=this.getCall(T),A[g||d].apply(A,arguments)&&(E+=1,y))return!0;return E===this.callCount}}var push=Array.prototype.push,slice=Array.prototype.slice,callId=0,vars='a,b,c,d,e,f,g,h,i,j,k,l',uuid=0,spyApi={reset:function(){if(this.invoking){var y=new Error('Cannot reset Sinon function while invoking it. Move the call to .reset outside of the callback.');throw y.name='InvalidResetException',y}if(this.called=!1,this.notCalled=!0,this.calledOnce=!1,this.calledTwice=!1,this.calledThrice=!1,this.callCount=0,this.firstCall=null,this.secondCall=null,this.thirdCall=null,this.lastCall=null,this.args=[],this.returnValues=[],this.thisValues=[],this.exceptions=[],this.callIds=[],this.stacks=[],this.fakes)for(var g=0;g<this.fakes.length;g++)this.fakes[g].reset();return this},create:function(y,g){var w;'function'===typeof y?w=sinon.functionName(y):y=function(){},g||(g=y.length);var A=createProxy(y,g);return sinon.extend(A,spy),delete A.create,sinon.extend(A,y),A.reset(),A.prototype=y.prototype,A.displayName=w||'spy',A.toString=sinon.functionToString,A.instantiateFake=sinon.spy.create,A.id='spy#'+uuid++,A},invoke:function(y,g,w){var E,T,A=matchingFake(this.fakes,w);incrementCallCount.call(this),push.call(this.thisValues,g),push.call(this.args,w),push.call(this.callIds,callId++),createCallProperties.call(this);try{this.invoking=!0,T=A?A.invoke(y,g,w):(this.func||y).apply(g,w);var S=this.getCall(this.callCount-1);S.calledWithNew()&&'object'!==('undefined'===typeof T?'undefined':babelHelpers.typeof(T))&&(T=g)}catch(O){E=O}finally{delete this.invoking}if(push.call(this.exceptions,E),push.call(this.returnValues,T),push.call(this.stacks,new Error().stack),createCallProperties.call(this),void 0!==E)throw E;return T},named:function(y){return this.displayName=y,this},getCall:function(y){return 0>y||y>=this.callCount?null:sinon.spyCall(this,this.thisValues[y],this.args[y],this.returnValues[y],this.exceptions[y],this.callIds[y],this.stacks[y])},getCalls:function(){var g,y=[];for(g=0;g<this.callCount;g++)y.push(this.getCall(g));return y},calledBefore:function(y){return!!this.called&&(!y.called||this.callIds[0]<y.callIds[y.callIds.length-1])},calledAfter:function(y){return this.called&&y.called&&this.callIds[this.callCount-1]>y.callIds[y.callCount-1]},withArgs:function(){var y=slice.call(arguments);if(this.fakes){var g=matchingFake(this.fakes,y,!0);if(g)return g}else this.fakes=[];var w=this,A=this.instantiateFake();A.matchingAguments=y,A.parent=this,push.call(this.fakes,A),A.withArgs=function(){return w.withArgs.apply(w,arguments)};for(var E=0;E<this.args.length;E++)A.matches(this.args[E])&&(incrementCallCount.call(A),push.call(A.thisValues,this.thisValues[E]),push.call(A.args,this.args[E]),push.call(A.returnValues,this.returnValues[E]),push.call(A.exceptions,this.exceptions[E]),push.call(A.callIds,this.callIds[E]));return createCallProperties.call(A),A},matches:function(y,g){var w=this.matchingAguments;if(w.length<=y.length&&sinon.deepEqual(w,y.slice(0,w.length)))return!g||w.length===y.length},printf:function(y){var A,g=this,w=slice.call(arguments,1);return(y||'').replace(/%(.)/g,function(E,T){return(A=spyApi.formatters[T],'function'===typeof A)?A.call(null,g,w):isNaN(parseInt(T,10))?'%'+T:sinon.format(w[T-1])})}};return delegateToCalls('calledOn',!0),delegateToCalls('alwaysCalledOn',!1,'calledOn'),delegateToCalls('calledWith',!0),delegateToCalls('calledWithMatch',!0),delegateToCalls('alwaysCalledWith',!1,'calledWith'),delegateToCalls('alwaysCalledWithMatch',!1,'calledWithMatch'),delegateToCalls('calledWithExactly',!0),delegateToCalls('alwaysCalledWithExactly',!1,'calledWithExactly'),delegateToCalls('neverCalledWith',!1,'notCalledWith',function(){return!0}),delegateToCalls('neverCalledWithMatch',!1,'notCalledWithMatch',function(){return!0}),delegateToCalls('threw',!0),delegateToCalls('alwaysThrew',!1,'threw'),delegateToCalls('returned',!0),delegateToCalls('alwaysReturned',!1,'returned'),delegateToCalls('calledWithNew',!0),delegateToCalls('alwaysCalledWithNew',!1,'calledWithNew'),delegateToCalls('callArg',!1,'callArgWith',function(){throw new Error(this.toString()+' cannot call arg since it was not yet invoked.')}),spyApi.callArgWith=spyApi.callArg,delegateToCalls('callArgOn',!1,'callArgOnWith',function(){throw new Error(this.toString()+' cannot call arg since it was not yet invoked.')}),spyApi.callArgOnWith=spyApi.callArgOn,delegateToCalls('yield',!1,'yield',function(){throw new Error(this.toString()+' cannot yield since it was not yet invoked.')}),spyApi.invokeCallback=spyApi.yield,delegateToCalls('yieldOn',!1,'yieldOn',function(){throw new Error(this.toString()+' cannot yield since it was not yet invoked.')}),delegateToCalls('yieldTo',!1,'yieldTo',function(d){throw new Error(this.toString()+' cannot yield to \''+d+'\' since it was not yet invoked.')}),delegateToCalls('yieldToOn',!1,'yieldToOn',function(d){throw new Error(this.toString()+' cannot yield to \''+d+'\' since it was not yet invoked.')}),spyApi.formatters={c:function(y){return sinon.timesInWords(y.callCount)},n:function(y){return y.toString()},C:function(y){for(var E,g=[],w=0,A=y.callCount;w<A;++w)E='    '+y.getCall(w).toString(),/\n/.test(g[w-1])&&(E='\n'+E),push.call(g,E);return 0<g.length?'\n'+g.join('\n'):''},t:function(y){for(var g=[],w=0,A=y.callCount;w<A;++w)push.call(g,sinon.format(y.thisValues[w]));return g.join(', ')},"*":function(y,g){for(var w=[],A=0,E=g.length;A<E;++A)push.call(w,sinon.format(g[A]));return w.join(', ')}},sinon.extend(spy,spyApi),spy.spyCall=sinon.spyCall,sinon.spy=spy,spy}function loadDependencies(d,y,g){var w=d('./util/core');d('./call'),d('./extend'),d('./times_in_words'),d('./format'),g.exports=makeApi(w)}var isNode='undefined'!==typeof module&&module.exports&&'function'===typeof require,isAMD='function'===typeof define&&'object'===babelHelpers.typeof(define.amd)&&define.amd;return isAMD?void define(loadDependencies):isNode?void loadDependencies(require,module.exports,module):void(sinonGlobal&&makeApi(sinonGlobal))}('object'===('undefined'===typeof sinon?'undefined':babelHelpers.typeof(sinon))&&sinon),function(d){function y(q,N){return'string'===typeof q?(this.exception=new Error(N||''),this.exception.name=q):q?this.exception=q:this.exception=new Error('Error'),this}function g(q,N){var D=q.callArgAt;if(0<=D)return N[D];var L;D===S&&(L=N),D===O&&(L=E.call(N).reverse());for(var M=q.callArgProp,X=0,H=L.length;X<H;++X){if(!M&&'function'===typeof L[X])return L[X];if(M&&L[X]&&'function'===typeof L[X][M])return L[X][M]}return null}function w(q){function N(H,W,V){if(0>H.callArgAt){var B;return B=H.callArgProp?q.functionName(H.stub)+' expected to yield to \''+H.callArgProp+'\', but no object with such a property was passed.':q.functionName(H.stub)+' expected to yield, but no callback was passed.',0<V.length&&(B+=' Received ['+T.call(V,', ')+']'),B}return'argument at index '+H.callArgAt+' is not a function: '+W}function D(H,W){if('number'===typeof H.callArgAt){var V=g(H,W);if('function'!==typeof V)throw new TypeError(N(H,V,W));H.callbackAsync?R(function(){V.apply(H.callbackContext,H.callbackArguments)}):V.apply(H.callbackContext,H.callbackArguments)}}function L(H){return function(){var W=this[H].apply(this,arguments);return this.callbackAsync=!0,W}}var M={create:function(W){var V=q.extend({},q.behavior);return delete V.create,V.stub=W,V},isPresent:function(){return'number'===typeof this.callArgAt||this.exception||'number'===typeof this.returnArgAt||this.returnThis||this.returnValueDefined},invoke:function(W,V){if(D(this,V),this.exception)throw this.exception;else{if('number'===typeof this.returnArgAt)return V[this.returnArgAt];if(this.returnThis)return W}return this.returnValue},onCall:function(W){return this.stub.onCall(W)},onFirstCall:function(){return this.stub.onFirstCall()},onSecondCall:function(){return this.stub.onSecondCall()},onThirdCall:function(){return this.stub.onThirdCall()},withArgs:function(){throw new Error('Defining a stub by invoking "stub.onCall(...).withArgs(...)" is not supported. Use "stub.withArgs(...).onCall(...)" to define sequential behavior for calls with certain arguments.')},callsArg:function(W){if('number'!==typeof W)throw new TypeError('argument index is not number');return this.callArgAt=W,this.callbackArguments=[],this.callbackContext=void 0,this.callArgProp=void 0,this.callbackAsync=!1,this},callsArgOn:function(W,V){if('number'!==typeof W)throw new TypeError('argument index is not number');if('object'!==('undefined'===typeof V?'undefined':babelHelpers.typeof(V)))throw new TypeError('argument context is not an object');return this.callArgAt=W,this.callbackArguments=[],this.callbackContext=V,this.callArgProp=void 0,this.callbackAsync=!1,this},callsArgWith:function(W){if('number'!==typeof W)throw new TypeError('argument index is not number');return this.callArgAt=W,this.callbackArguments=E.call(arguments,1),this.callbackContext=void 0,this.callArgProp=void 0,this.callbackAsync=!1,this},callsArgOnWith:function(W,V){if('number'!==typeof W)throw new TypeError('argument index is not number');if('object'!==('undefined'===typeof V?'undefined':babelHelpers.typeof(V)))throw new TypeError('argument context is not an object');return this.callArgAt=W,this.callbackArguments=E.call(arguments,2),this.callbackContext=V,this.callArgProp=void 0,this.callbackAsync=!1,this},yields:function(){return this.callArgAt=S,this.callbackArguments=E.call(arguments,0),this.callbackContext=void 0,this.callArgProp=void 0,this.callbackAsync=!1,this},yieldsRight:function(){return this.callArgAt=O,this.callbackArguments=E.call(arguments,0),this.callbackContext=void 0,this.callArgProp=void 0,this.callbackAsync=!1,this},yieldsOn:function(W){if('object'!==('undefined'===typeof W?'undefined':babelHelpers.typeof(W)))throw new TypeError('argument context is not an object');return this.callArgAt=S,this.callbackArguments=E.call(arguments,1),this.callbackContext=W,this.callArgProp=void 0,this.callbackAsync=!1,this},yieldsTo:function(W){return this.callArgAt=S,this.callbackArguments=E.call(arguments,1),this.callbackContext=void 0,this.callArgProp=W,this.callbackAsync=!1,this},yieldsToOn:function(W,V){if('object'!==('undefined'===typeof V?'undefined':babelHelpers.typeof(V)))throw new TypeError('argument context is not an object');return this.callArgAt=S,this.callbackArguments=E.call(arguments,2),this.callbackContext=V,this.callArgProp=W,this.callbackAsync=!1,this},throws:y,throwsException:y,returns:function(W){return this.returnValue=W,this.returnValueDefined=!0,this.exception=void 0,this},returnsArg:function(W){if('number'!==typeof W)throw new TypeError('argument index is not number');return this.returnArgAt=W,this},returnsThis:function(){return this.returnThis=!0,this}};for(var X in M)M.hasOwnProperty(X)&&X.match(/^(callsArg|yields)/)&&!X.match(/Async/)&&(M[X+'Async']=L(X));return q.behavior=M,M}function A(q,N,D){var L=q('./util/core');q('./extend'),D.exports=w(L)}var E=Array.prototype.slice,T=Array.prototype.join,S=-1,O=-2,R=function(){return'object'===('undefined'===typeof process?'undefined':babelHelpers.typeof(process))&&'function'===typeof process.nextTick?process.nextTick:'function'===typeof setImmediate?setImmediate:function(q){setTimeout(q,0)}}(),I='undefined'!==typeof module&&module.exports&&'function'===typeof require,P='function'===typeof define&&'object'===babelHelpers.typeof(define.amd)&&define.amd;return P?void define(A):I?void A(require,module.exports,module):void(d&&w(d))}('object'===('undefined'===typeof sinon?'undefined':babelHelpers.typeof(sinon))&&sinon),function(d){function y(E){function T(O,R,I,P){var q,N;if('function'!==typeof Object.getOwnPropertyNames){for(N in O)R.call(I,O[N],N,O);return}Object.getOwnPropertyNames(O).forEach(function(D){var L='function'===typeof Object.getOwnPropertyDescriptor(O,D).get?P:O;R.call(I,L[D],D,L)}),q=Object.getPrototypeOf(O),q&&T(q,R,I,P)}return E.walk=function(O,R,I){return T(O,R,I,O)},E.walk}function g(E,T,S){var O=E('./util/core');S.exports=y(O)}var w='undefined'!==typeof module&&module.exports&&'function'===typeof require,A='function'===typeof define&&'object'===babelHelpers.typeof(define.amd)&&define.amd;return A?void define(g):w?void g(require,module.exports,module):void(d&&y(d))}('object'===('undefined'===typeof sinon?'undefined':babelHelpers.typeof(sinon))&&sinon),function(d){function y(E){function T(D,L,M){if(!!M&&'function'!==typeof M&&'object'!==('undefined'===typeof M?'undefined':babelHelpers.typeof(M)))throw new TypeError('Custom stub should be a function or a property descriptor');var X;if(!M){var V=0;'object'===('undefined'===typeof D?'undefined':babelHelpers.typeof(D))&&'function'===typeof D[L]&&(V=D[L].length),X=T.create(V)}else if('function'===typeof M)X=E.spy&&E.spy.create?E.spy.create(M):M;else if(X=M,E.spy&&E.spy.create)for(var H=E.objectKeys(X),W=0;W<H.length;W++)X[H[W]]=E.spy.create(X[H[W]]);return D||'undefined'!==typeof L?'undefined'===typeof L&&'object'===('undefined'===typeof D?'undefined':babelHelpers.typeof(D))?(E.walk(D||{},function(B,U,G){G!==Object.prototype&&'constructor'!==U&&'function'===typeof E.getPropertyDescriptor(G,U).value&&T(D,U)}),D):E.wrapMethod(D,L,X):E.stub.create()}function S(D){return D.parent&&R(D.parent)}function O(D){return D.defaultBehavior||S(D)||E.behavior.create(D)}function R(D){var L=D.behaviors[D.callCount-1];return L&&L.isPresent()?L:O(D)}function I(D){return function(){return this.defaultBehavior=this.defaultBehavior||E.behavior.create(this),this.defaultBehavior[D].apply(this.defaultBehavior,arguments),this}}var P=0,q={create:function(L){var M=function(){return R(M).invoke(this,arguments)};M.id='stub#'+P++;var X=M;return M=E.spy.create(M,L),M.func=X,E.extend(M,T),M.instantiateFake=E.stub.create,M.displayName='stub',M.toString=E.functionToString,M.defaultBehavior=null,M.behaviors=[],M},resetBehavior:function(){var L;if(this.defaultBehavior=null,this.behaviors=[],delete this.returnValue,delete this.returnArgAt,this.returnThis=!1,this.fakes)for(L=0;L<this.fakes.length;L++)this.fakes[L].resetBehavior()},onCall:function(L){return this.behaviors[L]||(this.behaviors[L]=E.behavior.create(this)),this.behaviors[L]},onFirstCall:function(){return this.onCall(0)},onSecondCall:function(){return this.onCall(1)},onThirdCall:function(){return this.onCall(2)}};for(var N in E.behavior)E.behavior.hasOwnProperty(N)&&!q.hasOwnProperty(N)&&'create'!==N&&'withArgs'!==N&&'invoke'!==N&&(q[N]=I(N));return E.extend(T,q),E.stub=T,T}function g(E,T,S){var O=E('./util/core');E('./behavior'),E('./spy'),E('./extend'),S.exports=y(O)}var w='undefined'!==typeof module&&module.exports&&'function'===typeof require,A='function'===typeof define&&'object'===babelHelpers.typeof(define.amd)&&define.amd;return A?void define(g):w?void g(require,module.exports,module):void(d&&y(d))}('object'===('undefined'===typeof sinon?'undefined':babelHelpers.typeof(sinon))&&sinon),function(d){function y(E){function T(H){return H?T.create(H):E.expectation.create('Anonymous mock')}function S(H,W){if(H)for(var V=0,B=H.length;V<B;V+=1)W(H[V])}function O(H,W,V){if(V&&H.length!==W.length)return!1;for(var B=0,U=H.length;B<U;B++)if(!E.deepEqual(H[B],W[B]))return!1;return!0}function R(H){return 0===H?'never called':'called '+M(H)}function I(H){var W=H.minCalls,V=H.maxCalls;if('number'===typeof W&&'number'===typeof V){var B=M(W);return W!==V&&(B='at least '+B+' and at most '+M(V)),B}return'number'===typeof W?'at least '+M(W):'at most '+M(V)}function P(H){var W='number'===typeof H.minCalls;return!W||H.callCount>=H.minCalls}function q(H){return'number'===typeof H.maxCalls&&H.callCount===H.maxCalls}function N(H,W){var V=L&&L.isMatcher(H);return V&&H.test(W)||!0}var D=[].push,L=E.match;E.extend(T,{create:function(W){if(!W)throw new TypeError('object is null');var V=E.extend({},T);return V.object=W,delete V.create,V},expects:function(W){if(!W)throw new TypeError('method is falsy');if(this.expectations||(this.expectations={},this.proxies=[]),!this.expectations[W]){this.expectations[W]=[];var V=this;E.wrapMethod(this.object,W,function(){return V.invokeMethod(W,this,arguments)}),D.call(this.proxies,W)}var B=E.expectation.create(W);return D.call(this.expectations[W],B),B},restore:function(){var W=this.object;S(this.proxies,function(V){'function'===typeof W[V].restore&&W[V].restore()})},verify:function(){var W=this.expectations||{},V=[],B=[];return S(this.proxies,function(U){S(W[U],function(G){G.met()?D.call(B,G.toString()):D.call(V,G.toString())})}),this.restore(),0<V.length?E.expectation.fail(V.concat(B).join('\n')):0<B.length&&E.expectation.pass(V.concat(B).join('\n')),!0},invokeMethod:function(W,V,B){var z,$,U=this.expectations&&this.expectations[W]?this.expectations[W]:[],G=[],K=B||[];for(z=0;z<U.length;z+=1){var Z=U[z].expectedArguments||[];O(Z,K,U[z].expectsExactArgCount)&&G.push(U[z])}for(z=0;z<G.length;z+=1)if(!G[z].met()&&G[z].allowsCall(V,B))return G[z].apply(V,B);var J=[],Y=0;for(z=0;z<G.length;z+=1)G[z].allowsCall(V,B)?$=$||G[z]:Y+=1;if($&&0===Y)return $.apply(V,B);for(z=0;z<U.length;z+=1)D.call(J,'    '+U[z].toString());J.unshift('Unexpected call: '+E.spyCall.toString.call({proxy:W,args:B})),E.expectation.fail(J.join('\n'))}});var M=E.timesInWords,X=Array.prototype.slice;return E.expectation={minCalls:1,maxCalls:1,create:function(W){var V=E.extend(E.stub.create(),E.expectation);return delete V.create,V.method=W,V},invoke:function(W,V,B){return this.verifyCallAllowed(V,B),E.spy.invoke.apply(this,arguments)},atLeast:function(W){if('number'!==typeof W)throw new TypeError('\''+W+'\' is not number');return this.limitsSet||(this.maxCalls=null,this.limitsSet=!0),this.minCalls=W,this},atMost:function(W){if('number'!==typeof W)throw new TypeError('\''+W+'\' is not number');return this.limitsSet||(this.minCalls=null,this.limitsSet=!0),this.maxCalls=W,this},never:function(){return this.exactly(0)},once:function(){return this.exactly(1)},twice:function(){return this.exactly(2)},thrice:function(){return this.exactly(3)},exactly:function(W){if('number'!==typeof W)throw new TypeError('\''+W+'\' is not a number');return this.atLeast(W),this.atMost(W)},met:function(){return!this.failed&&P(this)},verifyCallAllowed:function(W,V){if(q(this)&&(this.failed=!0,E.expectation.fail(this.method+' already called '+M(this.maxCalls))),'expectedThis'in this&&this.expectedThis!==W&&E.expectation.fail(this.method+' called with '+W+' as thisValue, expected '+this.expectedThis),!!('expectedArguments'in this)){V||E.expectation.fail(this.method+' received no arguments, expected '+E.format(this.expectedArguments)),V.length<this.expectedArguments.length&&E.expectation.fail(this.method+' received too few arguments ('+E.format(V)+'), expected '+E.format(this.expectedArguments)),this.expectsExactArgCount&&V.length!==this.expectedArguments.length&&E.expectation.fail(this.method+' received too many arguments ('+E.format(V)+'), expected '+E.format(this.expectedArguments));for(var B=0,U=this.expectedArguments.length;B<U;B+=1)N(this.expectedArguments[B],V[B])||E.expectation.fail(this.method+' received wrong arguments '+E.format(V)+', didn\'t match '+this.expectedArguments.toString()),E.deepEqual(this.expectedArguments[B],V[B])||E.expectation.fail(this.method+' received wrong arguments '+E.format(V)+', expected '+E.format(this.expectedArguments))}},allowsCall:function(W,V){if(this.met()&&q(this))return!1;if('expectedThis'in this&&this.expectedThis!==W)return!1;if(!('expectedArguments'in this))return!0;if(V=V||[],V.length<this.expectedArguments.length)return!1;if(this.expectsExactArgCount&&V.length!==this.expectedArguments.length)return!1;for(var B=0,U=this.expectedArguments.length;B<U;B+=1){if(!N(this.expectedArguments[B],V[B]))return!1;if(!E.deepEqual(this.expectedArguments[B],V[B]))return!1}return!0},withArgs:function(){return this.expectedArguments=X.call(arguments),this},withExactArgs:function(){return this.withArgs.apply(this,arguments),this.expectsExactArgCount=!0,this},on:function(W){return this.expectedThis=W,this},toString:function(){var W=(this.expectedArguments||[]).slice();this.expectsExactArgCount||D.call(W,'[...]');var V=E.spyCall.toString.call({proxy:this.method||'anonymous mock expectation',args:W}),B=V.replace(', [...','[, ...')+' '+I(this);return this.met()?'Expectation met: '+B:'Expected '+B+' ('+R(this.callCount)+')'},verify:function(){return this.met()?E.expectation.pass(this.toString()):E.expectation.fail(this.toString()),!0},pass:function(W){E.assert.pass(W)},fail:function(W){var V=new Error(W);throw V.name='ExpectationError',V}},E.mock=T,T}function g(E,T,S){var O=E('./util/core');E('./times_in_words'),E('./call'),E('./extend'),E('./match'),E('./spy'),E('./stub'),E('./format'),S.exports=y(O)}var w='undefined'!==typeof module&&module.exports&&'function'===typeof require,A='function'===typeof define&&'object'===babelHelpers.typeof(define.amd)&&define.amd;return A?void define(g):w?void g(require,module.exports,module):void(d&&y(d))}('object'===('undefined'===typeof sinon?'undefined':babelHelpers.typeof(sinon))&&sinon),function(d){function y(I){return I.fakes||(I.fakes=[]),I.fakes}function g(I,P){for(var q=y(I),N=0,D=q.length;N<D;N+=1)'function'===typeof q[N][P]&&q[N][P]()}function w(I){for(var P=y(I),q=0;q<P.length;)P.splice(q,1)}function A(I){var P={verify:function(){g(this,'verify')},restore:function(){g(this,'restore'),w(this)},reset:function(){g(this,'reset')},verifyAndRestore:function(){var N;try{this.verify()}catch(D){N=D}if(this.restore(),N)throw N},add:function(N){return T.call(y(this),N),N},spy:function(){return this.add(I.spy.apply(I,arguments))},stub:function(N,D,L){if(D){var M=N[D];if('function'!==typeof M){if(!S.call(N,D))throw new TypeError('Cannot stub non-existent own property '+D);return N[D]=L,this.add({restore:function(){N[D]=M}})}}if(!D&&!!N&&'object'===('undefined'===typeof N?'undefined':babelHelpers.typeof(N))){var X=I.stub.apply(I,arguments);for(var H in X)'function'===typeof X[H]&&this.add(X[H]);return X}return this.add(I.stub.apply(I,arguments))},mock:function(){return this.add(I.mock.apply(I,arguments))},inject:function(N){var D=this;return N.spy=function(){return D.spy.apply(D,arguments)},N.stub=function(){return D.stub.apply(D,arguments)},N.mock=function(){return D.mock.apply(D,arguments)},N}};return I.collection=P,P}function E(I,P,q){var N=I('./util/core');I('./mock'),I('./spy'),I('./stub'),q.exports=A(N)}var T=[].push,S=Object.prototype.hasOwnProperty,O='undefined'!==typeof module&&module.exports&&'function'===typeof require,R='function'===typeof define&&'object'===babelHelpers.typeof(define.amd)&&define.amd;return R?void define(E):O?void E(require,module.exports,module):void(d&&A(d))}('object'===('undefined'===typeof sinon?'undefined':babelHelpers.typeof(sinon))&&sinon),function(){function d(A,E){var T='undefined'===typeof lolex?E:lolex;A.useFakeTimers=function(){var S,O=Array.prototype.slice.call(arguments);S='string'===typeof O[0]?0:O.shift();var R=T.install(S||0,O);return R.restore=R.uninstall,R},A.clock={create:function(O){return T.createClock(O)}},A.timers={setTimeout:setTimeout,clearTimeout:clearTimeout,setImmediate:'undefined'===typeof setImmediate?void 0:setImmediate,clearImmediate:'undefined'===typeof clearImmediate?void 0:clearImmediate,setInterval:setInterval,clearInterval:clearInterval,Date:Date}}function y(A,E,T,S){var O=A('./core');d(O,S),T.exports=O}var g='undefined'!==typeof module&&module.exports&&'function'===typeof require,w='function'===typeof define&&'object'===babelHelpers.typeof(define.amd)&&define.amd;w?define(y):g?y(require,module.exports,module,require('lolex')):d(sinon)}(),'undefined'===typeof sinon&&(this.sinon={}),function(){function d(E){E.Event=function(S,O,R,I){this.initEvent(S,O,R,I)},E.Event.prototype={initEvent:function(S,O,R,I){this.type=S,this.bubbles=O,this.cancelable=R,this.target=I},stopPropagation:function(){},preventDefault:function(){this.defaultPrevented=!0}},E.ProgressEvent=function(S,O,R){this.initEvent(S,!1,!1,R),this.loaded=O.loaded||null,this.total=O.total||null,this.lengthComputable=!!O.total},E.ProgressEvent.prototype=new E.Event,E.ProgressEvent.prototype.constructor=E.ProgressEvent,E.CustomEvent=function(S,O,R){this.initEvent(S,!1,!1,R),this.detail=O.detail||null},E.CustomEvent.prototype=new E.Event,E.CustomEvent.prototype.constructor=E.CustomEvent,E.EventTarget={addEventListener:function(S,O){this.eventListeners=this.eventListeners||{},this.eventListeners[S]=this.eventListeners[S]||[],g.call(this.eventListeners[S],O)},removeEventListener:function(S,O){for(var R=this.eventListeners&&this.eventListeners[S]||[],I=0,P=R.length;I<P;++I)if(R[I]===O)return R.splice(I,1)},dispatchEvent:function(S){for(var O=S.type,R=this.eventListeners&&this.eventListeners[O]||[],I=0;I<R.length;I++)'function'===typeof R[I]?R[I].call(this,S):R[I].handleEvent(S);return!!S.defaultPrevented}}}function y(E){var T=E('./core');d(T)}var g=[].push,w='undefined'!==typeof module&&module.exports&&'function'===typeof require,A='function'===typeof define&&'object'===babelHelpers.typeof(define.amd)&&define.amd;A?define(y):w?y(require):d(sinon)}(),function(d){function y(T){function O(I,P){function q(){throw P.message=N+P.message,P}var N=I+' threw exception: ';T.log(N+'['+P.name+'] '+P.message),P.stack&&T.log(P.stack),O.useImmediateExceptions?q():O.setTimeout(q,0)}O.useImmediateExceptions=!1,O.setTimeout=function(I,P){w(I,P)};var R={log:T.log=function(){},logError:T.logError=O};return R}function g(T,S,O){var R=T('./util/core');O.exports=y(R)}var w=setTimeout,A='undefined'!==typeof module&&module.exports&&'function'===typeof require,E='function'===typeof define&&'object'===babelHelpers.typeof(define.amd)&&define.amd;return E?void define(g):A?void g(require,module.exports,module):void(d&&y(d))}('object'===('undefined'===typeof sinon?'undefined':babelHelpers.typeof(sinon))&&sinon),'undefined'===typeof sinon&&(this.sinon={}),function(d){function y(T){function S(){this.readyState=S.UNSENT,this.requestBody=null,this.requestHeaders={},this.status=0,this.timeout=null,'function'===typeof S.onCreate&&S.onCreate(this)}function O(P){if(P.readyState!==S.OPENED)throw new Error('INVALID_STATE_ERR');if(P.sendFlag)throw new Error('INVALID_STATE_ERR')}function R(P){if(P.readyState===S.UNSENT)throw new Error('Request not sent');if(P.readyState===S.DONE)throw new Error('Request done')}function I(P){if('string'!==typeof P){var q=new Error('Attempted to respond to fake XDomainRequest with '+P+', which is not a string.');throw q.name='InvalidBodyException',q}}T.xdr=w,T.extend(S.prototype,T.EventTarget,{open:function(q,N){this.method=q,this.url=N,this.responseText=null,this.sendFlag=!1,this.readyStateChange(S.OPENED)},readyStateChange:function(q){this.readyState=q;var N='';switch(this.readyState){case S.UNSENT:break;case S.OPENED:break;case S.LOADING:this.sendFlag&&(N='onprogress');break;case S.DONE:N=this.isTimeout?'ontimeout':this.errorFlag||200>this.status||299<this.status?'onerror':'onload';}if(N&&'function'===typeof this[N])try{this[N]()}catch(D){T.logError('Fake XHR '+N+' handler',D)}},send:function(q){O(this),/^(get|head)$/i.test(this.method)||(this.requestBody=q),this.requestHeaders['Content-Type']='text/plain;charset=utf-8',this.errorFlag=!1,this.sendFlag=!0,this.readyStateChange(S.OPENED),'function'===typeof this.onSend&&this.onSend(this)},abort:function(){this.aborted=!0,this.responseText=null,this.errorFlag=!0,this.readyState>T.FakeXDomainRequest.UNSENT&&this.sendFlag&&(this.readyStateChange(T.FakeXDomainRequest.DONE),this.sendFlag=!1)},setResponseBody:function(q){R(this),I(q);var N=this.chunkSize||10,D=0;this.responseText='';do this.readyStateChange(S.LOADING),this.responseText+=q.substring(D,D+N),D+=N;while(D<q.length);this.readyStateChange(S.DONE)},respond:function(q,N,D){this.status='number'===typeof q?q:200,this.setResponseBody(D||'')},simulatetimeout:function(){this.status=0,this.isTimeout=!0,this.responseText=void 0,this.readyStateChange(S.DONE)}}),T.extend(S,{UNSENT:0,OPENED:1,LOADING:3,DONE:4}),T.useFakeXDomainRequest=function(){return T.FakeXDomainRequest.restore=function(N){w.supportsXDR&&(d.XDomainRequest=w.GlobalXDomainRequest),delete T.FakeXDomainRequest.restore,!0!==N&&delete T.FakeXDomainRequest.onCreate},w.supportsXDR&&(d.XDomainRequest=T.FakeXDomainRequest),T.FakeXDomainRequest},T.FakeXDomainRequest=S}function g(T,S,O){var R=T('./core');T('../extend'),T('./event'),T('../log_error'),y(R),O.exports=R}var w={XDomainRequest:d.XDomainRequest};w.GlobalXDomainRequest=d.XDomainRequest,w.supportsXDR='undefined'!==typeof w.GlobalXDomainRequest,w.workingXDR=!!w.supportsXDR&&w.GlobalXDomainRequest;var A='undefined'!==typeof module&&module.exports&&'function'===typeof require,E='function'===typeof define&&'object'===babelHelpers.typeof(define.amd)&&define.amd;E?define(g):A?g(require,module.exports,module):y(sinon)}('undefined'===typeof global?self:global),function(d,y){function w(){this.eventListeners={progress:[],load:[],abort:[],error:[]}}function A(){function Q(ae){ee.addEventListener(ae,function(oe){var re=ee['on'+ae];re&&'function'===typeof re&&re.call(this,oe)})}this.readyState=A.UNSENT,this.requestHeaders={},this.requestBody=null,this.status=0,this.statusText='',this.upload=new w,this.responseType='',this.response='',K.supportsCORS&&(this.withCredentials=!1);for(var ee=this,te=['loadstart','load','abort','loadend'],ne=te.length-1;0<=ne;ne--)Q(te[ne]);'function'===typeof A.onCreate&&A.onCreate(this)}function E(Q){if(Q.readyState!==A.OPENED)throw new Error('INVALID_STATE_ERR');if(Q.sendFlag)throw new Error('INVALID_STATE_ERR')}function T(Q,ee){for(var te in ee=ee.toLowerCase(),Q)if(te.toLowerCase()===ee)return te;return null}function S(Q,ee){if(Q)for(var te=0,ne=Q.length;te<ne;te+=1)ee(Q[te])}function O(Q,ee){for(var te=0;te<Q.length;te++)if(!0===ee(Q[te]))return!0;return!1}function R(Q){if(Q.readyState!==A.OPENED)throw new Error('INVALID_STATE_ERR - '+Q.readyState)}function I(Q){if(Q.readyState===A.DONE)throw new Error('Request done')}function P(Q){if(Q.async&&Q.readyState!==A.HEADERS_RECEIVED)throw new Error('No headers received')}function q(Q){if('string'!==typeof Q){var ee=new Error('Attempted to respond to fake XMLHttpRequest with '+Q+', which is not a string.');throw ee.name='InvalidBodyException',ee}}function N(Q){for(var ae,ee=new ArrayBuffer(Q.length),te=new Uint8Array(ee),ne=0;ne<Q.length;ne++){if(ae=Q.charCodeAt(ne),256<=ae)throw new TypeError('arraybuffer or blob responseTypes require binary string, invalid character '+Q[ne]+' found.');te[ne]=ae}return ee}function D(Q){return!Q||/(text\/xml)|(application\/xml)|(\+xml)/.test(Q)}function L(Q,ee,te){if(''===Q||'text'===Q)return te;if(U&&'arraybuffer'===Q)return N(te);if('json'===Q)try{return JSON.parse(te)}catch(ae){return null}else{if(G&&'blob'===Q){var ne={};return ee&&(ne.type=ee),new Blob([N(te)],ne)}if('document'===Q)return D(ee)?A.parseXML(te):null}throw new Error('Invalid responseType '+Q)}function M(Q){Q.response=''===Q.responseType||'text'===Q.responseType?Q.responseText='':Q.responseText=null,Q.responseXML=null}function X(Q){Q.xhr=K,Q.extend(A.prototype,Q.EventTarget,{async:!0,open:function(te,ne,ae,oe,re){if(this.method=te,this.url=ne,this.async='boolean'!==typeof ae||ae,this.username=oe,this.password=re,M(this),this.requestHeaders={},this.sendFlag=!1,!0===A.useFilters){var se=arguments,le=O(A.filters,function(ie){return ie.apply(this,se)});if(le)return A.defake(this,arguments)}this.readyStateChange(A.OPENED)},readyStateChange:function(te){this.readyState=te;var ne=new Q.Event('readystatechange',!1,!1,this);if('function'===typeof this.onreadystatechange)try{this.onreadystatechange(ne)}catch(ae){Q.logError('Fake XHR onreadystatechange handler',ae)}switch(this.readyState){case A.DONE:W&&(this.upload.dispatchEvent(new Q.ProgressEvent('progress',{loaded:100,total:100})),this.dispatchEvent(new Q.ProgressEvent('progress',{loaded:100,total:100}))),this.upload.dispatchEvent(new Q.Event('load',!1,!1,this)),this.dispatchEvent(new Q.Event('load',!1,!1,this)),this.dispatchEvent(new Q.Event('loadend',!1,!1,this));}this.dispatchEvent(ne)},setRequestHeader:function(te,ne){if(E(this),z[te]||/^(Sec-|Proxy-)/.test(te))throw new Error('Refused to set unsafe header "'+te+'"');this.requestHeaders[te]?this.requestHeaders[te]+=','+ne:this.requestHeaders[te]=ne},setResponseHeaders:function(te){for(var ne in R(this),this.responseHeaders={},te)te.hasOwnProperty(ne)&&(this.responseHeaders[ne]=te[ne]);this.async?this.readyStateChange(A.HEADERS_RECEIVED):this.readyState=A.HEADERS_RECEIVED},send:function(te){if(E(this),!/^(get|head)$/i.test(this.method)){var ne=T(this.requestHeaders,'Content-Type');if(this.requestHeaders[ne]){var ae=this.requestHeaders[ne].split(';');this.requestHeaders[ne]=ae[0]+';charset=utf-8'}else B&&!(te instanceof FormData)&&(this.requestHeaders['Content-Type']='text/plain;charset=utf-8');this.requestBody=te}this.errorFlag=!1,this.sendFlag=this.async,M(this),this.readyStateChange(A.OPENED),'function'===typeof this.onSend&&this.onSend(this),this.dispatchEvent(new Q.Event('loadstart',!1,!1,this))},abort:function(){this.aborted=!0,M(this),this.errorFlag=!0,this.requestHeaders={},this.responseHeaders={},this.readyState>A.UNSENT&&this.sendFlag&&(this.readyStateChange(A.DONE),this.sendFlag=!1),this.readyState=A.UNSENT,this.dispatchEvent(new Q.Event('abort',!1,!1,this)),this.upload.dispatchEvent(new Q.Event('abort',!1,!1,this)),'function'===typeof this.onerror&&this.onerror()},getResponseHeader:function(te){return this.readyState<A.HEADERS_RECEIVED?null:/^Set-Cookie2?$/i.test(te)?null:(te=T(this.responseHeaders,te),this.responseHeaders[te]||null)},getAllResponseHeaders:function(){if(this.readyState<A.HEADERS_RECEIVED)return'';var te='';for(var ne in this.responseHeaders)this.responseHeaders.hasOwnProperty(ne)&&!/^Set-Cookie2?$/i.test(ne)&&(te+=ne+': '+this.responseHeaders[ne]+'\r\n');return te},setResponseBody:function(te){I(this),P(this),q(te);var ne=this.getResponseHeader('Content-Type'),ae=''===this.responseType||'text'===this.responseType;if(M(this),this.async){var oe=this.chunkSize||10,re=0;do this.readyStateChange(A.LOADING),ae&&(this.responseText=this.response+=te.substring(re,re+oe)),re+=oe;while(re<te.length)}this.response=L(this.responseType,ne,te),ae&&(this.responseText=this.response),'document'===this.responseType?this.responseXML=this.response:''===this.responseType&&D(ne)&&(this.responseXML=A.parseXML(this.responseText)),this.readyStateChange(A.DONE)},respond:function(te,ne,ae){this.status='number'===typeof te?te:200,this.statusText=A.statusCodes[this.status],this.setResponseHeaders(ne||{}),this.setResponseBody(ae||'')},uploadProgress:function(te){W&&this.upload.dispatchEvent(new Q.ProgressEvent('progress',te))},downloadProgress:function(te){W&&this.dispatchEvent(new Q.ProgressEvent('progress',te))},uploadError:function(te){V&&this.upload.dispatchEvent(new Q.CustomEvent('error',{detail:te}))}}),Q.extend(A,{UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4}),Q.useFakeXMLHttpRequest=function(){return A.restore=function(te){K.supportsXHR&&(y.XMLHttpRequest=K.GlobalXMLHttpRequest),K.supportsActiveX&&(y.ActiveXObject=K.GlobalActiveXObject),delete A.restore,!0!==te&&delete A.onCreate},K.supportsXHR&&(y.XMLHttpRequest=A),K.supportsActiveX&&(y.ActiveXObject=function(te){return'Microsoft.XMLHTTP'===te||/^Msxml2\.XMLHTTP/i.test(te)?new A:new K.GlobalActiveXObject(te)}),A},Q.FakeXMLHttpRequest=A}function H(Q,ee,te){var ne=Q('./core');Q('../extend'),Q('./event'),Q('../log_error'),X(ne),te.exports=ne}var W='undefined'!==typeof ProgressEvent,V='undefined'!==typeof CustomEvent,B='undefined'!==typeof FormData,U='undefined'!==typeof ArrayBuffer,G='function'===typeof Blob,K={XMLHttpRequest:y.XMLHttpRequest};K.GlobalXMLHttpRequest=y.XMLHttpRequest,K.GlobalActiveXObject=y.ActiveXObject,K.supportsActiveX='undefined'!==typeof K.GlobalActiveXObject,K.supportsXHR='undefined'!==typeof K.GlobalXMLHttpRequest,K.workingXHR=function(Q){var ee='undefined'!==typeof Q.XMLHttpRequest;if(ee)return Q.XMLHttpRequest;var te='undefined'!==typeof Q.ActiveXObject;return!!te&&function(){return new Q.ActiveXObject('MSXML2.XMLHTTP.3.0')}}(y),K.supportsCORS=K.supportsXHR&&'withCredentials'in new K.GlobalXMLHttpRequest;var z={"Accept-Charset":!0,"Accept-Encoding":!0,Connection:!0,"Content-Length":!0,Cookie:!0,Cookie2:!0,"Content-Transfer-Encoding":!0,Date:!0,Expect:!0,Host:!0,"Keep-Alive":!0,Referer:!0,TE:!0,Trailer:!0,"Transfer-Encoding":!0,Upgrade:!0,"User-Agent":!0,Via:!0};w.prototype.addEventListener=function(ee,te){this.eventListeners[ee].push(te)},w.prototype.removeEventListener=function(ee,te){for(var ne=this.eventListeners[ee]||[],ae=0,oe=ne.length;ae<oe;++ae)if(ne[ae]===te)return ne.splice(ae,1)},w.prototype.dispatchEvent=function(ee){for(var ae,te=this.eventListeners[ee.type]||[],ne=0;null!=(ae=te[ne]);ne++)ae(ee)};var $=function(ee,te,ne){switch(ne.length){case 0:return ee[te]();case 1:return ee[te](ne[0]);case 2:return ee[te](ne[0],ne[1]);case 3:return ee[te](ne[0],ne[1],ne[2]);case 4:return ee[te](ne[0],ne[1],ne[2],ne[3]);case 5:return ee[te](ne[0],ne[1],ne[2],ne[3],ne[4]);}};A.filters=[],A.addFilter=function(ee){this.filters.push(ee)};var Z=/MSIE 6/;A.defake=function(ee,te){var ne=new K.workingXHR;S(['open','setRequestHeader','send','abort','getResponseHeader','getAllResponseHeaders','addEventListener','overrideMimeType','removeEventListener'],function(se){ee[se]=function(){return $(ne,se,arguments)}});var ae=function(le){S(le,function(ie){try{ee[ie]=ne[ie]}catch(de){if(!Z.test(navigator.userAgent))throw de}})},oe=function(){ee.readyState=ne.readyState,ne.readyState>=A.HEADERS_RECEIVED&&ae(['status','statusText']),ne.readyState>=A.LOADING&&ae(['responseText','response']),ne.readyState===A.DONE&&ae(['responseXML']),ee.onreadystatechange&&ee.onreadystatechange.call(ee,{target:ee})};if(ne.addEventListener){for(var re in ee.eventListeners)ee.eventListeners.hasOwnProperty(re)&&S(ee.eventListeners[re],function(se){ne.addEventListener(re,se)});ne.addEventListener('readystatechange',oe)}else ne.onreadystatechange=oe;$(ne,'open',te)},A.useFilters=!1,A.parseXML=function(ee){if(''!==ee)try{if('undefined'!==typeof DOMParser){var te=new DOMParser;return te.parseFromString(ee,'text/xml')}var ne=new window.ActiveXObject('Microsoft.XMLDOM');return ne.async='false',ne.loadXML(ee),ne}catch(ae){}return null},A.statusCodes={100:'Continue',101:'Switching Protocols',200:'OK',201:'Created',202:'Accepted',203:'Non-Authoritative Information',204:'No Content',205:'Reset Content',206:'Partial Content',207:'Multi-Status',300:'Multiple Choice',301:'Moved Permanently',302:'Found',303:'See Other',304:'Not Modified',305:'Use Proxy',307:'Temporary Redirect',400:'Bad Request',401:'Unauthorized',402:'Payment Required',403:'Forbidden',404:'Not Found',405:'Method Not Allowed',406:'Not Acceptable',407:'Proxy Authentication Required',408:'Request Timeout',409:'Conflict',410:'Gone',411:'Length Required',412:'Precondition Failed',413:'Request Entity Too Large',414:'Request-URI Too Long',415:'Unsupported Media Type',416:'Requested Range Not Satisfiable',417:'Expectation Failed',422:'Unprocessable Entity',500:'Internal Server Error',501:'Not Implemented',502:'Bad Gateway',503:'Service Unavailable',504:'Gateway Timeout',505:'HTTP Version Not Supported'};var J='undefined'!==typeof module&&module.exports&&'function'===typeof require,Y='function'===typeof define&&'object'===babelHelpers.typeof(define.amd)&&define.amd;return Y?void define(H):J?void H(require,module.exports,module):void(d&&X(d))}('object'===('undefined'===typeof sinon?'undefined':babelHelpers.typeof(sinon))&&sinon,'undefined'===typeof global?self:global),function(){function d(I){var P=I;if('[object Array]'!==Object.prototype.toString.call(I)&&(P=[200,{},I]),'string'!==typeof P[2])throw new TypeError('Fake server response body should be string, but was '+babelHelpers.typeof(P[2]));return P}function y(I,P,q){var N=I.method,D=!N||N.toLowerCase()===P.toLowerCase(),L=I.url,M=!L||L===q||'function'===typeof L.test&&L.test(q);return D&&M}function g(I,P){var q=P.url;if((!/^https?:\/\//.test(q)||S.test(q))&&(q=q.replace(S,'')),y(I,this.getHTTPMethod(P),q)){if('function'===typeof I.response){var N=I.url,D=[P].concat(N&&'function'===typeof N.exec?N.exec(q).slice(1):[]);return I.response.apply(I,D)}return!0}return!1}function w(I){I.fakeServer={create:function(q){var N=I.create(this);return N.configure(q),this.xhr=I.xhr.supportsCORS?I.useFakeXMLHttpRequest():I.useFakeXDomainRequest(),N.requests=[],this.xhr.onCreate=function(D){N.addRequest(D)},N},configure:function(q){var D,N={autoRespond:!0,autoRespondAfter:!0,respondImmediately:!0,fakeHTTPMethods:!0};for(D in q=q||{},q)N.hasOwnProperty(D)&&q.hasOwnProperty(D)&&(this[D]=q[D])},addRequest:function(q){var N=this;E.call(this.requests,q),q.onSend=function(){N.handleRequest(this),N.respondImmediately?N.respond():N.autoRespond&&!N.responding&&(setTimeout(function(){N.responding=!1,N.respond()},N.autoRespondAfter||10),N.responding=!0)}},getHTTPMethod:function(q){if(this.fakeHTTPMethods&&/post/i.test(q.method)){var N=(q.requestBody||'').match(/_method=([^\b;]+)/);return N?N[1]:q.method}return q.method},handleRequest:function(q){q.async?(!this.queue&&(this.queue=[]),E.call(this.queue,q)):this.processRequest(q)},log:function(q,N){var D;D='Request:\n'+I.format(N)+'\n\n',D+='Response:\n'+I.format(q)+'\n\n',I.log(D)},respondWith:function(q,N,D){return 1===arguments.length&&'function'!==typeof q?void(this.response=d(q)):void(!this.responses&&(this.responses=[]),1===arguments.length&&(D=q,N=q=null),2===arguments.length&&(D=N,N=q,q=null),E.call(this.responses,{method:q,url:N,response:'function'===typeof D?D:d(D)}))},respond:function(){0<arguments.length&&this.respondWith.apply(this,arguments);for(var q=this.queue||[],N=q.splice(0,q.length),D=0;D<N.length;D++)this.processRequest(N[D])},processRequest:function(q){try{if(q.aborted)return;var N=this.response||[404,{},''];if(this.responses)for(var D=this.responses.length,L=D-1;0<=L;L--)if(g.call(this,this.responses[L],q)){N=this.responses[L].response;break}4!==q.readyState&&(this.log(N,q),q.respond(N[0],N[1],N[2]))}catch(M){I.logError('Fake server request processing',M)}},restore:function(){return this.xhr.restore&&this.xhr.restore.apply(this.xhr,arguments)}}}function A(I,P,q){var N=I('./core');I('./fake_xdomain_request'),I('./fake_xml_http_request'),I('../format'),w(N),q.exports=N}var E=[].push,T='undefined'===typeof window?{}:window.location,S=new RegExp('^'+T.protocol+'//'+T.host),O='undefined'!==typeof module&&module.exports&&'function'===typeof require,R='function'===typeof define&&'object'===babelHelpers.typeof(define.amd)&&define.amd;R?define(A):O?A(require,module.exports,module):w(sinon)}(),function(){function d(A){function E(){}E.prototype=A.fakeServer,A.fakeServerWithClock=new E,A.fakeServerWithClock.addRequest=function(S){if(S.async&&('object'===babelHelpers.typeof(setTimeout.clock)?this.clock=setTimeout.clock:(this.clock=A.useFakeTimers(),this.resetClock=!0),!this.longestTimeout)){var O=this.clock.setTimeout,R=this.clock.setInterval,I=this;this.clock.setTimeout=function(P,q){return I.longestTimeout=Math.max(q,I.longestTimeout||0),O.apply(this,arguments)},this.clock.setInterval=function(P,q){return I.longestTimeout=Math.max(q,I.longestTimeout||0),R.apply(this,arguments)}}return A.fakeServer.addRequest.call(this,S)},A.fakeServerWithClock.respond=function(){var S=A.fakeServer.respond.apply(this,arguments);return this.clock&&(this.clock.tick(this.longestTimeout||0),this.longestTimeout=0,this.resetClock&&(this.clock.restore(),this.resetClock=!1)),S},A.fakeServerWithClock.restore=function(){return this.clock&&this.clock.restore(),A.fakeServer.restore.apply(this,arguments)}}function y(A){var E=A('./core');A('./fake_server'),A('./fake_timers'),d(E)}var g='undefined'!==typeof module&&module.exports&&'function'===typeof require,w='function'===typeof define&&'object'===babelHelpers.typeof(define.amd)&&define.amd;w?define(y):g?y(require):d(sinon)}(),function(d){function y(E){function T(R,I,P,q){q&&(I.injectInto&&!(P in I.injectInto)?(I.injectInto[P]=q,R.injectedKeys.push(P)):O.call(R.args,q))}function S(R){var I=E.create(E.sandbox);return R.useFakeServer&&('object'===babelHelpers.typeof(R.useFakeServer)&&(I.serverPrototype=R.useFakeServer),I.useFakeServer()),R.useFakeTimers&&('object'===babelHelpers.typeof(R.useFakeTimers)?I.useFakeTimers.apply(I,R.useFakeTimers):I.useFakeTimers()),I}var O=[].push;return E.sandbox=E.extend(E.create(E.collection),{useFakeTimers:function(){return this.clock=E.useFakeTimers.apply(E,arguments),this.add(this.clock)},serverPrototype:E.fakeServer,useFakeServer:function(){var I=this.serverPrototype||E.fakeServer;return I&&I.create?(this.server=I.create(),this.add(this.server)):null},inject:function(I){return E.collection.inject.call(this,I),this.clock&&(I.clock=this.clock),this.server&&(I.server=this.server,I.requests=this.server.requests),I.match=E.match,I},restore:function(){E.collection.restore.apply(this,arguments),this.restoreContext()},restoreContext:function(){if(this.injectedKeys){for(var I=0,P=this.injectedKeys.length;I<P;I++)delete this.injectInto[this.injectedKeys[I]];this.injectedKeys=[]}},create:function(I){if(!I)return E.create(E.sandbox);var P=S(I);P.args=P.args||[],P.injectedKeys=[],P.injectInto=I.injectInto;var q,N,D=P.inject({});if(I.properties)for(var L=0,M=I.properties.length;L<M;L++)q=I.properties[L],N=D[q]||'sandbox'===q&&P,T(P,I,q,N);else T(P,I,'sandbox',N);return P},match:E.match}),E.sandbox.useFakeXMLHttpRequest=E.sandbox.useFakeServer,E.sandbox}function g(E,T,S){var O=E('./util/core');E('./extend'),E('./util/fake_server_with_clock'),E('./util/fake_timers'),E('./collection'),S.exports=y(O)}var w='undefined'!==typeof module&&module.exports&&'function'===typeof require,A='function'===typeof define&&'object'===babelHelpers.typeof(define.amd)&&define.amd;return A?void define(g):w?void g(require,module.exports,module):void(d&&y(d))}('object'===('undefined'===typeof sinon?'undefined':babelHelpers.typeof(sinon))&&sinon),function(d){function y(E){function T(O){function R(){var P=E.getConfig(E.config);P.injectInto=P.injectIntoThis&&this||P.injectInto;var L,M,q=E.sandbox.create(P),N=S.call(arguments),D=N.length&&N[N.length-1];'function'===typeof D&&(N[N.length-1]=function(H){H?q.restore():q.verifyAndRestore(),D(H)});try{M=O.apply(this,N.concat(q.args))}catch(X){L=X}if('function'!==typeof D)if('undefined'!==typeof L)throw q.restore(),L;else q.verifyAndRestore();return M}var I='undefined'===typeof O?'undefined':babelHelpers.typeof(O);if('function'!==I)throw new TypeError('sinon.test needs to wrap a test function, got '+I);return O.length?function(){return R.apply(this,arguments)}:R}var S=Array.prototype.slice;return T.config={injectIntoThis:!0,injectInto:null,properties:['spy','stub','mock','clock','server','requests'],useFakeTimers:!0,useFakeServer:!0},E.test=T,T}function g(E,T,S){var O=E('./util/core');E('./sandbox'),S.exports=y(O)}var w='undefined'!==typeof module&&module.exports&&'function'===typeof require,A='function'===typeof define&&'object'===babelHelpers.typeof(define.amd)&&define.amd;A?define(g):w?g(require,module.exports,module):d&&y(d)}('object'===('undefined'===typeof sinon?'undefined':babelHelpers.typeof(sinon))&&sinon||null),function(d){function y(T,S,O){return function(){S&&S.apply(this,arguments);var R,I;try{I=T.apply(this,arguments)}catch(P){R=P}if(O&&O.apply(this,arguments),R)throw R;return I}}function g(T){function S(O,R){if(!O||'object'!==('undefined'===typeof O?'undefined':babelHelpers.typeof(O)))throw new TypeError('sinon.testCase needs an object with test functions');R=R||'test';var D,L,M,I=new RegExp('^'+R),P={},q=O.setUp,N=O.tearDown;for(D in O)O.hasOwnProperty(D)&&!/^(setUp|tearDown)$/.test(D)&&(L=O[D],'function'===typeof L&&I.test(D)?(M=L,(q||N)&&(M=y(L,q,N)),P[D]=T.test(M)):P[D]=O[D]);return P}return T.testCase=S,S}function w(T,S,O){var R=T('./util/core');T('./test'),O.exports=g(R)}var A='undefined'!==typeof module&&module.exports&&'function'===typeof require,E='function'===typeof define&&'object'===babelHelpers.typeof(define.amd)&&define.amd;return E?void define(w):A?void w(require,module.exports,module):void(d&&g(d))}('object'===('undefined'===typeof sinon?'undefined':babelHelpers.typeof(sinon))&&sinon),function(d,y){function g(S){function O(){for(var N,D=0,L=arguments.length;D<L;++D)N=arguments[D],N||q.fail('fake is not a spy'),N.proxy&&N.proxy.isSinonProxy?O(N.proxy):('function'!==typeof N&&q.fail(N+' is not a function'),'function'!==typeof N.getCall&&q.fail(N+' is not stubbed'))}function R(N,D){N=N||y;var L=N.fail||q.fail;L.call(N,D)}function I(N,D,L){2===arguments.length&&(L=D,D=N),q[N]=function(M){O(M);var X=A.call(arguments,1),H=!1;H='function'===typeof D?!D(M):'function'===typeof M[D]?!M[D].apply(M,X):!M[D],H?R(this,(M.printf||M.proxy.printf).apply(M,[L].concat(X))):q.pass(N)}}function P(N,D){return!N||/^fail/.test(D)?D:N+D.slice(0,1).toUpperCase()+D.slice(1)}var q;return q={failException:'AssertError',fail:function(D){var L=new Error(D);throw L.name=this.failException||q.failException,L},pass:function(){},callOrder:function(){O.apply(null,arguments);var D='',L='';if(!S.calledInOrder(arguments)){try{D=[].join.call(arguments,', ');for(var M=A.call(arguments),X=M.length;X;)M[--X].called||M.splice(X,1);L=S.orderByFirstCall(M).join(', ')}catch(H){}R(this,'expected '+D+' to be called in order but were called as '+L)}else q.pass('callOrder')},callCount:function(D,L){if(O(D),D.callCount!==L){var M='expected %n to be called '+S.timesInWords(L)+' but was called %c%C';R(this,D.printf(M))}else q.pass('callCount')},expose:function(D,L){if(!D)throw new TypeError('target is null or undefined');var M=L||{},X='undefined'===typeof M.prefix&&'assert'||M.prefix,H='undefined'===typeof M.includeFail||!!M.includeFail;for(var W in this)'expose'!==W&&(H||!/^(fail)/.test(W))&&(D[P(X,W)]=this[W]);return D},match:function(D,L){var M=S.match(L);if(M.test(D))q.pass('match');else{var X=['expected value to match','    expected = '+S.format(L),'    actual = '+S.format(D)];R(this,X.join('\n'))}}},I('called','expected %n to have been called at least once but was never called'),I('notCalled',function(N){return!N.called},'expected %n to not have been called but was called %c%C'),I('calledOnce','expected %n to be called once but was called %c%C'),I('calledTwice','expected %n to be called twice but was called %c%C'),I('calledThrice','expected %n to be called thrice but was called %c%C'),I('calledOn','expected %n to be called with %1 as this but was called with %t'),I('alwaysCalledOn','expected %n to always be called with %1 as this but was called with %t'),I('calledWithNew','expected %n to be called with new'),I('alwaysCalledWithNew','expected %n to always be called with new'),I('calledWith','expected %n to be called with arguments %*%C'),I('calledWithMatch','expected %n to be called with match %*%C'),I('alwaysCalledWith','expected %n to always be called with arguments %*%C'),I('alwaysCalledWithMatch','expected %n to always be called with match %*%C'),I('calledWithExactly','expected %n to be called with exact arguments %*%C'),I('alwaysCalledWithExactly','expected %n to always be called with exact arguments %*%C'),I('neverCalledWith','expected %n to never be called with arguments %*%C'),I('neverCalledWithMatch','expected %n to never be called with match %*%C'),I('threw','%n did not throw exception%C'),I('alwaysThrew','%n did not always throw exception%C'),S.assert=q,q}function w(S,O,R){var I=S('./util/core');S('./match'),S('./format'),R.exports=g(I)}var A=Array.prototype.slice,E='undefined'!==typeof module&&module.exports&&'function'===typeof require,T='function'===typeof define&&'object'===babelHelpers.typeof(define.amd)&&define.amd;return T?void define(w):E?void w(require,module.exports,module):void(d&&g(d))}('object'===('undefined'===typeof sinon?'undefined':babelHelpers.typeof(sinon))&&sinon,'undefined'===typeof global?self:global),sinon});