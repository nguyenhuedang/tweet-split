<!DOCTYPE html><html><head><title>iron-resizable-behavior tests</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
    <script>if (!window.customElements) { document.write('<!--'); }</script>
    <script type="text/javascript" src="../../webcomponentsjs/custom-elements-es5-adapter.js"></script>
    <!--! do not remove -->
<script src="../../webcomponentsjs/webcomponents-lite.js"></script><script src="../../web-component-tester/browser.js"></script><link rel="import" href="../iron-resizable-behavior.html"><link rel="import" href="test-elements.html"></head><body><test-fixture id="TestElement"><template><test-element></test-element></template></test-fixture><script>suite('iron-resizable-behavior',function(){function a(f,g){var h=function(j){j.path?j.path[0]:j.target;c--};return!1!==g&&c++,f.addEventListener('iron-resize',h),{el:f,remove:function(){f.removeEventListener('iron-resize',h)}}}function b(f){f.forEach(function(g){g.remove()})}var c,d;setup(function(){c=0,d=fixture('TestElement')}),suite('x-resizer-parent',function(){test('notify resizables from window',function(){var f=[a(d.$.parent),a(d.$.child1a),a(d.$.child1b),a(d.$.shadow1c.$.resizable),a(d.$.shadow1d.$.resizable)];window.dispatchEvent(new CustomEvent('resize',{bubbles:!1})),expect(c).to.be.eql(0),b(f)}),test('notify resizables from parent',function(){var f=[a(d.$.parent),a(d.$.child1a),a(d.$.child1b),a(d.$.shadow1c.$.resizable),a(d.$.shadow1d.$.resizable)];d.$.parent.notifyResize(),expect(c).to.be.eql(0),b(f)}),test('detach resizables then notify parent',function(){sinon.spy(d.$.child1a,'notifyResize'),sinon.spy(d.$.shadow1c.$.resizable,'notifyResize'),sinon.spy(d.$.child1b,'notifyResize'),sinon.spy(d.$.shadow1d.$.resizable,'notifyResize');var f=d.$.child1a,g=Polymer.dom(f).parentNode,h=d.$.shadow1c.$.resizable,i=Polymer.dom(h).parentNode;Polymer.dom(g).removeChild(f),Polymer.dom(i).removeChild(h),Polymer.dom.flush(),d.$.parent.notifyResize(),expect(d.$.child1a.notifyResize.callCount).to.be.equal(0),expect(d.$.shadow1c.$.resizable.notifyResize.callCount).to.be.equal(0),expect(d.$.child1b.notifyResize.callCount).to.be.equal(1),expect(d.$.shadow1d.$.resizable.notifyResize.callCount).to.be.equal(1)}),test('detach parent then notify window',function(f){var g=[a(d.$.parent,!1),a(d.$.child1a,!1),a(d.$.child1b,!1),a(d.$.shadow1c.$.resizable,!1),a(d.$.shadow1d.$.resizable,!1)],h=Polymer.dom(d.root).querySelector('#parent');h.parentNode.removeChild(h),setTimeout(function(){try{window.dispatchEvent(new CustomEvent('resize',{bubbles:!1})),expect(c).to.be.eql(0),b(g),f()}catch(i){f(i)}},0)})}),suite('x-resizer-parent-filtered',function(){test('notify resizables from window',function(){var f=[a(d.$.parentFiltered),a(d.$.child2a),a(d.$.child2b,!1),a(d.$.shadow2c.$.resizable,!1),a(d.$.shadow2d.$.resizable,!1)];d.$.parentFiltered.active=d.$.child2a,window.dispatchEvent(new CustomEvent('resize',{bubbles:!1})),expect(c).to.be.eql(0),b(f)}),test('notify resizables from parent',function(){var f=[a(d.$.parentFiltered),a(d.$.child2a),a(d.$.child2b,!1),a(d.$.shadow2c.$.resizable,!1),a(d.$.shadow2d.$.resizable,!1)];d.$.parentFiltered.active=d.$.child2a,d.$.parentFiltered.notifyResize(),expect(c).to.be.eql(0),b(f)}),test('detach resizables then notify parent',function(){var f=[a(d.$.parentFiltered),a(d.$.child2a,!1),a(d.$.child2b,!1),a(d.$.shadow2c.$.resizable,!1),a(d.$.shadow2d.$.resizable)],g=Polymer.dom(d.root).querySelector('#child2a');g.parentNode.removeChild(g),g=Polymer.dom(d.root).querySelector('#shadow2c'),g.parentNode.removeChild(g),d.$.parentFiltered.active=d.$.shadow2d.$.resizable,d.$.parentFiltered.notifyResize(),expect(c).to.be.eql(0),b(f)})})});</script></body></html>