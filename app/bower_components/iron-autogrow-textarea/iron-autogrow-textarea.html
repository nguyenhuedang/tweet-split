<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../iron-behaviors/iron-control-state.html"><link rel="import" href="../iron-flex-layout/iron-flex-layout.html"><link rel="import" href="../iron-validatable-behavior/iron-validatable-behavior.html"></head><body><dom-module id="iron-autogrow-textarea"><template><style>:host{display:inline-block;position:relative;width:400px;border:1px solid;padding:2px;-moz-appearance:textarea;-webkit-appearance:textarea;overflow:hidden;}.mirror-text{visibility:hidden;word-wrap:break-word;}.fit{@apply --layout-fit;}textarea{position:relative;outline:none;border:none;resize:none;background:inherit;color:inherit;width:100%;height:100%;font-size:inherit;font-family:inherit;line-height:inherit;text-align:inherit;@apply --iron-autogrow-textarea;}textarea::-webkit-input-placeholder{@apply --iron-autogrow-textarea-placeholder;}textarea:-moz-placeholder{@apply --iron-autogrow-textarea-placeholder;}textarea::-moz-placeholder{@apply --iron-autogrow-textarea-placeholder;}textarea:-ms-input-placeholder{@apply --iron-autogrow-textarea-placeholder;}</style><div id="mirror" class="mirror-text" aria-hidden="true">&nbsp;</div><div class="textarea-container fit"><textarea id="textarea" name$="[[name]]" aria-label$="[[label]]" autocomplete$="[[autocomplete]]" autofocus$="[[autofocus]]" inputmode$="[[inputmode]]" placeholder$="[[placeholder]]" readonly$="[[readonly]]" required$="[[required]]" disabled$="[[disabled]]" rows$="[[rows]]" minlength$="[[minlength]]" maxlength$="[[maxlength]]"></textarea></div></template></dom-module><script>Polymer({is:'iron-autogrow-textarea',behaviors:[Polymer.IronValidatableBehavior,Polymer.IronControlState],properties:{value:{observer:'_valueChanged',type:String,notify:!0},bindValue:{observer:'_bindValueChanged',type:String,notify:!0},rows:{type:Number,value:1,observer:'_updateCached'},maxRows:{type:Number,value:0,observer:'_updateCached'},autocomplete:{type:String,value:'off'},autofocus:{type:Boolean,value:!1},inputmode:{type:String},placeholder:{type:String},readonly:{type:String},required:{type:Boolean},minlength:{type:Number},maxlength:{type:Number},label:{type:String}},listeners:{input:'_onInput'},get textarea(){return this.$.textarea},get selectionStart(){return this.$.textarea.selectionStart},get selectionEnd(){return this.$.textarea.selectionEnd},set selectionStart(a){this.$.textarea.selectionStart=a},set selectionEnd(a){this.$.textarea.selectionEnd=a},attached:function(){var b=navigator.userAgent.match(/iP(?:[oa]d|hone)/);b&&(this.$.textarea.style.marginLeft='-3px')},validate:function(){var b=this.$.textarea.validity.valid;return b&&(this.required&&''===this.value?b=!1:this.hasValidator()&&(b=Polymer.IronValidatableBehavior.validate.call(this,this.value))),this.invalid=!b,this.fire('iron-input-validate'),b},_bindValueChanged:function(b){this.value=b},_valueChanged:function(b){var c=this.textarea;c&&(c.value!==b&&(c.value=b||0===b?b:''),this.bindValue=b,this.$.mirror.innerHTML=this._valueForMirror())},_onInput:function(b){var c=Polymer.dom(b).path;this.value=c?c[0].value:b.target.value},_constrain:function(b){var c;for(b=b||[''],c=0<this.maxRows&&b.length>this.maxRows?b.slice(0,this.maxRows):b.slice(0);0<this.rows&&c.length<this.rows;)c.push('');return c.join('<br/>')+'&#160;'},_valueForMirror:function(){var b=this.textarea;if(b)return this.tokens=b&&b.value?b.value.replace(/&/gm,'&amp;').replace(/"/gm,'&quot;').replace(/'/gm,'&#39;').replace(/</gm,'&lt;').replace(/>/gm,'&gt;').split('\n'):[''],this._constrain(this.tokens)},_updateCached:function(){this.$.mirror.innerHTML=this._constrain(this.tokens)}});</script></body></html>