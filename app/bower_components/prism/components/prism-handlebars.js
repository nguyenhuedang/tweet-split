(function(a){var b=/\{\{\{[\w\W]+?\}\}\}|\{\{[\w\W]+?\}\}/g;a.languages.handlebars=a.languages.extend('markup',{handlebars:{pattern:b,inside:{delimiter:{pattern:/^\{\{\{?|\}\}\}?$/i,alias:'punctuation'},string:/(["'])(\\?.)*?\1/,number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee][+-]?\d+)?)\b/,boolean:/\b(true|false)\b/,block:{pattern:/^(\s*~?\s*)[#\/]\S+?(?=\s*~?\s*$|\s)/i,lookbehind:!0,alias:'keyword'},brackets:{pattern:/\[[^\]]+\]/,inside:{punctuation:/\[|\]/,variable:/[\w\W]+/}},punctuation:/[!"#%&'()*+,.\/;<=>@\[\\\]^`{|}~]/,variable:/[^!"#%&'()*+,.\/;<=>@\[\\\]^`{|}~\s]+/}}}),a.languages.insertBefore('handlebars','tag',{"handlebars-comment":{pattern:/\{\{![\w\W]*?\}\}/,alias:['handlebars','comment']}}),a.hooks.add('before-highlight',function(c){'handlebars'!==c.language||(c.tokenStack=[],c.backupCode=c.code,c.code=c.code.replace(b,function(d){return c.tokenStack.push(d),'___HANDLEBARS'+c.tokenStack.length+'___'}))}),a.hooks.add('before-insert',function(c){'handlebars'===c.language&&(c.code=c.backupCode,delete c.backupCode)}),a.hooks.add('after-highlight',function(c){if('handlebars'===c.language){for(var e,d=0;e=c.tokenStack[d];d++)c.highlightedCode=c.highlightedCode.replace('___HANDLEBARS'+(d+1)+'___',a.highlight(e,c.grammar,'handlebars').replace(/\$/g,'$$$$'));c.element.innerHTML=c.highlightedCode}})})(Prism);