(function(){'undefined'!==typeof self&&self.Prism&&self.document&&document.createRange&&(Prism.plugins.KeepMarkup=!0,Prism.hooks.add('before-highlight',function(a){if(a.element.children.length){var b=0,c=[],d=function e(g,h){var j={};h||(j.clone=g.cloneNode(!1),j.posOpen=b,c.push(j));for(var n,k=0,m=g.childNodes.length;k<m;k++)n=g.childNodes[k],1===n.nodeType?e(n):3===n.nodeType&&(b+=n.data.length);h||(j.posClose=b)};d(a.element,!0),c.length&&(a.keepMarkup=c)}}),Prism.hooks.add('after-highlight',function(a){if(a.keepMarkup&&a.keepMarkup.length){var b=function c(d,e){for(var j,g=0,h=d.childNodes.length;g<h;g++){if(j=d.childNodes[g],1!==j.nodeType)3===j.nodeType&&(!e.nodeStart&&e.pos+j.data.length>e.node.posOpen&&(e.nodeStart=j,e.nodeStartPos=e.node.posOpen-e.pos),e.nodeStart&&e.pos+j.data.length>=e.node.posClose&&(e.nodeEnd=j,e.nodeEndPos=e.node.posClose-e.pos),e.pos+=j.data.length);else if(!c(j,e))return!1;if(e.nodeStart&&e.nodeEnd){var k=document.createRange();return k.setStart(e.nodeStart,e.nodeStartPos),k.setEnd(e.nodeEnd,e.nodeEndPos),e.node.clone.appendChild(k.extractContents()),k.insertNode(e.node.clone),k.detach(),!1}}return!0};a.keepMarkup.forEach(function(c){b(a.element,{node:c,pos:0})})}}))})();