<!DOCTYPE html><html><head><title>focused-state</title>
    <script>if (!window.customElements) { document.write('<!--'); }</script>
    <script type="text/javascript" src="../../webcomponentsjs/custom-elements-es5-adapter.js"></script>
    <!--! do not remove -->
<script src="../../webcomponentsjs/webcomponents-lite.js"></script><script src="../../web-component-tester/browser.js"></script><script src="../../iron-test-helpers/mock-interactions.js"></script><link rel="import" href="test-elements.html"></head><body><test-fixture id="TrivialFocusedState"><template><test-control tabindex="-1"></test-control></template></test-fixture><test-fixture id="NestedFocusedState"><template><nested-focusable></nested-focusable></template></test-fixture><test-fixture id="LightDOM"><template><test-light-dom><input id="input"><nested-focusable></nested-focusable></test-light-dom></template></test-fixture><script>suite('focused-state',function(){var a;setup(function(){a=fixture('TrivialFocusedState')}),suite('when is focused',function(){test('receives a focused attribute',function(){expect(a.hasAttribute('focused')).to.be.eql(!1),MockInteractions.focus(a),expect(a.hasAttribute('focused')).to.be.eql(!0)}),test('focused property is true',function(){expect(a.focused).to.not.be.eql(!0),MockInteractions.focus(a),expect(a.focused).to.be.eql(!0)})}),suite('when is blurred',function(){test('loses the focused attribute',function(){MockInteractions.focus(a),expect(a.hasAttribute('focused')).to.be.eql(!0),MockInteractions.blur(a),expect(a.hasAttribute('focused')).to.be.eql(!1)}),test('focused property is false',function(){MockInteractions.focus(a),expect(a.focused).to.be.eql(!0),MockInteractions.blur(a),expect(a.focused).to.be.eql(!1)})}),suite('when the focused state is disabled',function(){test('will not be focusable',function(){var b=sinon.spy(a,'blur');MockInteractions.focus(a),a.disabled=!0,expect(a.getAttribute('tabindex')).to.be.eql('-1'),expect(b.called).to.be.eql(!0)})})}),suite('nested focusable',function(){var a;setup(function(){a=fixture('NestedFocusedState')}),test('focus/blur events fired on host element',function(){var b=0,c=0;a.addEventListener('focus',function(){b+=1,expect(a.focused).to.be.equal(!0),MockInteractions.blur(a.$.input)}),a.addEventListener('blur',function(){expect(a.focused).to.be.equal(!1),c+=1}),MockInteractions.focus(a.$.input),expect(c).to.be.greaterThan(0),expect(b).to.be.greaterThan(0)})}),suite('elements in the light dom',function(){var a,b,c;setup(function(){a=fixture('LightDOM'),b=Polymer.dom(a).querySelector('#input'),c=Polymer.dom(a).querySelector('nested-focusable').$.input}),test('should not fire the focus event',function(){var d=0;a.addEventListener('focus',function(){d+=1}),MockInteractions.focus(b),expect(d).to.be.equal(0)}),test('should not fire the focus event from shadow descendants',function(){var d=0;a.addEventListener('focus',function(){d+=1}),MockInteractions.focus(c),expect(d).to.be.equal(0)})});</script></body></html>