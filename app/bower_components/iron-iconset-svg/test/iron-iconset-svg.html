<!DOCTYPE html><html><head><title>iron-iconset-svg</title><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
    <script>if (!window.customElements) { document.write('<!--'); }</script>
    <script type="text/javascript" src="../../webcomponentsjs/custom-elements-es5-adapter.js"></script>
    <!--! do not remove -->
<script src="../../webcomponentsjs/webcomponents-lite.js"></script><script src="../../web-component-tester/browser.js"></script><script src="../../test-fixture/test-fixture-mocha.js"></script><link rel="import" href="../iron-iconset-svg.html"><link rel="import" href="../../iron-meta/iron-meta.html"><link rel="import" href="../../iron-icon/iron-icon.html"><link rel="import" href="../../promise-polyfill/promise-polyfill.html"><link rel="import" href="../../test-fixture/test-fixture.html"></head><body><test-fixture id="TrivialIconsetSvg"><template><iron-iconset-svg name="foo"></iron-iconset-svg><iron-meta type="iconset"></iron-meta></template></test-fixture><test-fixture id="MirroredIconsetSvg"><template><iron-iconset-svg name="mirrored-icons" rtl-mirroring=""><circle id="circle" cx="20" cy="20" r="10"></circle><symbol id="rect" viewbox="0 0 50 25" mirror-in-rtl=""><rect x="0" y="0" width="50" height="25"></rect></symbol></iron-iconset-svg></template></test-fixture><test-fixture id="RtlContainer"><template><div dir="rtl"></div></template></test-fixture><test-fixture id="StandardIconsetSvg"><template><iron-iconset-svg name="my-icons" size="20"><svg><defs><circle id="circle" cx="20" cy="20" r="10"></circle><rect id="square" x="0" y="0" width="20" height="20"></rect><symbol id="rect" viewBox="0 0 50 25"><rect x="0" y="0" width="50" height="25"></rect></symbol></defs></svg></iron-iconset-svg><div></div><iron-icon></iron-icon></template></test-fixture><script>suite('<iron-iconset>',function(){suite('basic behavior',function(){var a,b,c;setup(function(){c=new Promise(function(e){window.addEventListener('iron-iconset-added',function(f){f&&f.detail===a&&e()})});var d=fixture('TrivialIconsetSvg');a=d[0],b=d[1]}),test('it can be accessed via iron-meta',function(){expect(b.byKey('foo')).to.be.equal(a)}),test('it does not have a size',function(){var d=a.getBoundingClientRect();expect(d.width).to.be.equal(0),expect(d.height).to.be.equal(0)}),test('it fires an iron-iconset-added event on the window',function(){return c})}),suite('when stamping in an RTL context',function(){var a,b;setup(function(){a=fixture('MirroredIconsetSvg'),b=fixture('RtlContainer')}),test('icons marked as mirror-in-rtl are mirrored',function(){a.applyIcon(b,'rect');var c=b.firstElementChild,d=window.getComputedStyle(c),e=d.transform||d.webkitTransform;expect(e).to.be.eql('matrix(-1, 0, 0, 1, 0, 0)')}),test('icons not marked as mirror-in-rtl are not mirrored',function(){a.applyIcon(b,'circle');var c=b.firstElementChild,d=window.getComputedStyle(c),e=d.transform||d.webkitTransform;expect(e).to.be.eql('none')}),test('many mirrored icons only call getComputedStyle once',function(){sinon.spy(window,'getComputedStyle');for(var c=0;3>c;++c)a.applyIcon(b,'rect');expect(window.getComputedStyle.callCount).to.be.eql(1),window.getComputedStyle.restore()})}),suite('when paired with a size and SVG definition',function(){var a,b;setup(function(){var c=fixture('StandardIconsetSvg');a=c[0],b=c[1]}),test('it does not have a size',function(){var c=a.getBoundingClientRect();expect(c.width).to.be.equal(0),expect(c.height).to.be.equal(0)}),test('appends a child to the target element',function(){expect(b.firstElementChild).to.not.be.ok,a.applyIcon(b,'circle'),expect(b.firstElementChild).to.be.ok}),test('can be queried for all available icons',function(){expect(a.getIconNames()).to.deep.eql(['my-icons:circle','my-icons:square','my-icons:rect'])}),test('supports any icon defined in the svg',function(){var c;a.getIconNames().forEach(function(d){a.applyIcon(b,d.split(':').pop()),expect(b.firstElementChild).to.not.be.equal(c),c=b.firstElementChild})}),test('prefers a viewBox attribute over the iconset size',function(){a.applyIcon(b,'rect'),expect(b.firstElementChild.getAttribute('viewBox')).to.be.equal('0 0 50 25')}),test('uses the iconset size when viewBox is not defined on the element',function(){a.applyIcon(b,'circle'),expect(b.firstElementChild.getAttribute('viewBox')).to.be.equal('0 0 20 20')})}),suite('Adding / removal from iron-icon',function(){var a,b,c;setup(function(){var d=fixture('StandardIconsetSvg');a=d[0],b=d[1],c=d[2]}),test('be able to remove an iconset from a standard DOM element',function(){a.applyIcon(b,'circle'),Polymer.dom.flush(),expect(b.children.length).to.be.equal(1),a.removeIcon(b),Polymer.dom.flush(),expect(b.children.length).to.be.equal(0)}),test('be able to remove an iconset from a Polymer element',function(){var d=Polymer.dom(c.root).children.length;a.applyIcon(c,'circle'),Polymer.dom.flush(),expect(Polymer.dom(c.root).children.length-d).to.be.equal(1),a.removeIcon(c),Polymer.dom.flush(),expect(Polymer.dom(c.root).children.length-d).to.be.equal(0)}),test('prevents SVG from receiving a tab stop in IE/Edge',function(){a.applyIcon(b,'rect'),expect(b.firstElementChild.getAttribute('focusable')).to.be.equal('false')})})});</script></body></html>