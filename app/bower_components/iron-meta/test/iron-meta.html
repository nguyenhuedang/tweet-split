<!DOCTYPE html><html><head><title>iron-meta</title><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
    <script>if (!window.customElements) { document.write('<!--'); }</script>
    <script type="text/javascript" src="../../webcomponentsjs/custom-elements-es5-adapter.js"></script>
    <!--! do not remove -->
<script src="../../webcomponentsjs/webcomponents-lite.js"></script><script src="../../web-component-tester/browser.js"></script><script src="../../test-fixture/test-fixture-mocha.js"></script><link rel="import" href="../iron-meta.html"><link rel="import" href="../../test-fixture/test-fixture.html"></head><body><test-fixture id="TrivialMeta"><template><iron-meta self="" key="info"></iron-meta></template></test-fixture><test-fixture id="ManyMetas"><template><iron-meta self="" key="default1"></iron-meta><iron-meta self="" key="default2"></iron-meta><iron-meta self="" key="default3"></iron-meta></template></test-fixture><test-fixture id="DifferentTypedMetas"><template><iron-meta self="" type="foo" key="foobarKey"></iron-meta><iron-meta self="" type="bar" key="foobarKey"></iron-meta><iron-meta self="" key="defaultKey"></iron-meta></template></test-fixture><test-fixture id="ClashingMetas"><template><iron-meta self="" key="baz"></iron-meta><iron-meta self="" key="baz"></iron-meta></template></test-fixture><script>suite('<iron-meta>',function(){suite('basic behavior',function(){window.metas=[];var a;setup(function(){a=fixture('TrivialMeta'),a.id='meta'+metas.length,metas.push(a)}),teardown(function(){a.value=null}),test('uses itself as the default value',function(){expect(a.value).to.be.equal(a)}),test('can be assigned alternative values',function(){a.value='foobar',expect(a.list[0]).to.be.equal('foobar')}),test('can access same-type meta values by key',function(){expect(a.byKey(a.key)).to.be.equal(a.value)}),test('yields a list of same-type meta data',function(){expect(a.list).to.be.ok,expect(a.list.length).to.be.equal(1),expect(a.list[0]).to.be.equal(a)})}),suite('many same-typed metas',function(){var a;setup(function(){a=fixture('ManyMetas')}),teardown(function(){a.forEach(function(b){b.value=null})}),test('all cache all meta values',function(){a.forEach(function(b,c){expect(b.list.length).to.be.equal(a.length),expect(b.list[c].value).to.be.equal(b.value)})}),test('can be unregistered individually',function(){a[0].value=null,expect(a[0].list.length).to.be.equal(2),expect(a[0].list).to.be.deep.equal([a[1],a[2]])}),test('can access each others value by key',function(){expect(a[0].byKey('default2')).to.be.equal(a[1].value)})}),suite('different-typed metas',function(){var a;setup(function(){a=fixture('DifferentTypedMetas')}),teardown(function(){a.forEach(function(b){b.key=null})}),test('cache their values separately',function(){var b=a[0],c=a[1];expect(b.value).to.not.be.equal(c.value),expect(b.byKey('foobarKey')).to.be.equal(b.value),expect(c.byKey('foobarKey')).to.be.equal(c.value)}),test('cannot access values of other types',function(){var b=a[2];expect(b.byKey('foobarKey')).to.be.equal(void 0)}),test('only list values of their type',function(){a.forEach(function(b){expect(b.list.length).to.be.equal(1),expect(b.list[0]).to.be.equal(b.value)})})}),suite('metas with clashing keys',function(){var a;setup(function(){a=fixture('ClashingMetas')}),teardown(function(){a.forEach(function(b){b.key=null})}),test('let the last value win registration against the key',function(){var b=a[0].byKey(a[0].key),c=a[0].value,d=a[1].value;expect(b).to.not.be.equal(c),expect(b).to.be.equal(d)})}),suite('imperative usage',function(){var a;setup(function(){a=fixture('TrivialMeta')}),teardown(function(){a.value=null}),test('gets value by type and key',function(){expect(new Polymer.IronMeta({type:a.type,key:a.key}).value).to.be.equal(a.value)})})});</script></body></html>