'use strict';import documentWait from'./document-wait.js';export var CustomStyleProvider;var SEEN_MARKER='__seenByShadyCSS',CACHED_STYLE='__shadyCSSCachedStyle',transformFn=null,validateFn=null,CustomStyleInterface=function(){function a(){babelHelpers.classCallCheck(this,a),this.customStyles=[],this.enqueued=!1}return babelHelpers.createClass(a,[{key:'enqueueDocumentValidation',value:function(){this.enqueued||!validateFn||(this.enqueued=!0,documentWait(validateFn))}},{key:'addCustomStyle',value:function(c){c[SEEN_MARKER]||(c[SEEN_MARKER]=!0,this.customStyles.push(c),this.enqueueDocumentValidation())}},{key:'getStyleForCustomStyle',value:function(c){if(c[CACHED_STYLE])return c[CACHED_STYLE];var d;return d=c.getStyle?c.getStyle():c,d}},{key:'processStyles',value:function(){for(var e,c=this.customStyles,d=0;d<c.length;d++)if(e=c[d],!e[CACHED_STYLE]){var f=this.getStyleForCustomStyle(e);if(f){var g=f.__appliedElement;if(g)for(var j,h=0;h<f.attributes.length;h++)j=f.attributes[h],g.setAttribute(j.name,j.value);var k=g||f;transformFn&&transformFn(k),e[CACHED_STYLE]=k}}return c}}]),a}();export default CustomStyleInterface;CustomStyleInterface.prototype.addCustomStyle=CustomStyleInterface.prototype.addCustomStyle,CustomStyleInterface.prototype.getStyleForCustomStyle=CustomStyleInterface.prototype.getStyleForCustomStyle,CustomStyleInterface.prototype.processStyles=CustomStyleInterface.prototype.processStyles,Object.defineProperties(CustomStyleInterface.prototype,{transformCallback:{get:function(){return transformFn},set:function(b){transformFn=b}},validateCallback:{get:function(){return validateFn},set:function(b){var c=!1;validateFn||(c=!0),validateFn=b,c&&this.enqueueDocumentValidation()}}});export var CustomStyleInterfaceInterface;