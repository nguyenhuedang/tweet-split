<!DOCTYPE html><html><head><meta charset="UTF-8"><title>iron-localstorage-value-binding</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
    <script>if (!window.customElements) { document.write('<!--'); }</script>
    <script type="text/javascript" src="../../webcomponentsjs/custom-elements-es5-adapter.js"></script>
    <!--! do not remove -->
<script src="../../webcomponentsjs/webcomponents-lite.js"></script><script src="../../web-component-tester/browser.js"></script><link rel="import" href="../iron-localstorage.html"></head><body><dom-module id="x-foo"><template><div>{{value.foo}}</div></template></dom-module><dom-module id="x-test"><template><x-foo value="{{value}}"></x-foo><iron-localstorage id="localstorage" name="iron-localstorage-test" value="{{value}}"></iron-localstorage></template></dom-module><x-test></x-test><script>window.localStorage.setItem('iron-localstorage-test','{"foo":"bar"}');var xtest;suite('basic',function(){suiteSetup(function(){Polymer({is:'x-foo',properties:{value:{type:Object,notify:!0}}}),Polymer({is:'x-test',properties:{value:{type:Object,notify:!0}}}),window.localStorage.setItem('iron-localstorage-test','{"foo":"bar"}'),xtest=document.querySelector('x-test'),xtest.$.localstorage.reload()}),suiteTeardown(function(){window.localStorage.removeItem('iron-localstorage-test')}),test('initial value',function(){assert.isNotNull(xtest.value),assert.equal(xtest.value.foo,'bar')}),test('set value',function(){var a={foo:'zot'};xtest.value=a,xtest.$.localstorage.flushDebouncer('save');var b=window.localStorage.getItem(xtest.$.localstorage.name);b=JSON.parse(b),assert.equal(b.foo,a.foo)}),test('save',function(){xtest.value.foo='quux',xtest.$.localstorage.save();var a=window.localStorage.getItem(xtest.$.localstorage.name);a=JSON.parse(a),assert.equal(a.foo,'quux')})});</script></body></html>